###############################################################################
#                                                                             #
# IAR 8051 C/C++ Compiler V7.30B/W32                    06/Jun/2011  14:33:16 #
# Copyright 2004-2007 IAR Systems. All rights reserved.                       #
#                                                                             #
#    Core               =  plain                                              #
#    Code model         =  banked                                             #
#    Data model         =  large                                              #
#    Calling convention =  xdata reentrant                                    #
#    Constant location  =  data                                               #
#    Dptr setup         =  1,16                                               #
#    Source file        =  E:\嵌入式开发\hit-wsn\src\hit_wsn_2.1\hit_wsn_2.1\ #
#                          CC2430\Projects\zstack\Samples\Coordinator\Source\ #
#                          GenericApp.c                                       #
#    Command line       =  -f E:\嵌入式开发\hit-wsn\src\hit_wsn_2.1\hit_wsn_2 #
#                          .1\CC2430\Projects\zstack\Samples\Coordinator\CC24 #
#                          30DB\..\..\..\Tools\CC2430DB\f8wCoord.cfg          #
#                          (-DCPU32MHZ -DFORCE_MAC_NEAR -DROOT=__near_func    #
#                          -DMAC_CFG_APP_PENDING_QUEUE=TRUE                   #
#                          -DZDO_COORDINATOR -DRTR_NWK -DBLINK_LEDS           #
#                          "-DCONST=const __code" -DGENERIC=__generic) -f     #
#                          E:\嵌入式开发\hit-wsn\src\hit_wsn_2.1\hit_wsn_2.1\ #
#                          CC2430\Projects\zstack\Samples\Coordinator\CC2430D #
#                          B\..\..\..\Tools\CC2430DB\f8wConfig.cfg            #
#                          (-DSECURE=0 -DDEFAULT_CHANLIST=0x00000800          #
#                          -DZDAPP_CONFIG_PAN_ID=0xFFFF                       #
#                          -DNWK_START_DELAY=100 -DEXTENDED_JOINING_RANDOM_MA #
#                          SK=0x007F -DBEACON_REQUEST_DELAY=100               #
#                          -DBEACON_REQ_DELAY_MASK=0x00FF                     #
#                          -DROUTE_EXPIRY_TIME=30 -DAPSC_ACK_WAIT_DURATION_PO #
#                          LLED=3000 -DNWK_INDIRECT_MSG_TIMEOUT=7             #
#                          -DMAX_RREQ_ENTRIES=10 -DAPSC_MAX_FRAME_RETRIES=3   #
#                          -DNWK_MAX_DATA_RETRIES=2                           #
#                          -DMAX_POLL_FAILURE_RETRIES=2 -DMAX_BCAST=9         #
#                          -DAPS_MAX_GROUPS=16 -DMAX_RTG_ENTRIES=20           #
#                          -DNWK_MAX_BINDING_ENTRIES=10                       #
#                          -DMAX_BINDING_CLUSTER_IDS=5 "-DDEFAULT_KEY={0x01,  #
#                          0x03, 0x05, 0x07, 0x09, 0x0B, 0x0D, 0x0F, 0x00,    #
#                          0x02, 0x04, 0x06, 0x08, 0x0A, 0x0C, 0x0D}"         #
#                          -DRFD_RCVC_ALWAYS_ON=FALSE -DPOLL_RATE=1000        #
#                          -DQUEUED_POLL_RATE=100 -DRESPONSE_POLL_RATE=100)   #
#                          -DREJOIN_POLL_RATE=440 E:\嵌入式开发\hit-wsn\src\h #
#                          it_wsn_2.1\hit_wsn_2.1\CC2430\Projects\zstack\Samp #
#                          les\Coordinator\Source\GenericApp.c -D CC2430EB    #
#                          -D REFLECTOR -D ZTOOL_P1 -D MT_TASK -D             #
#                          xMT_ZDO_FUNC -D LCD_SUPPORTED=DEBUG -lC            #
#                          E:\嵌入式开发\hit-wsn\src\hit_wsn_2.1\hit_wsn_2.1\ #
#                          CC2430\Projects\zstack\Samples\Coordinator\CC2430D #
#                          B\CoordinatorEB\List\ -lA                          #
#                          E:\嵌入式开发\hit-wsn\src\hit_wsn_2.1\hit_wsn_2.1\ #
#                          CC2430\Projects\zstack\Samples\Coordinator\CC2430D #
#                          B\CoordinatorEB\List\ --diag_suppress Pe001,Pa010  #
#                          --diag_remark pe550 -o E:\嵌入式开发\hit-wsn\src\h #
#                          it_wsn_2.1\hit_wsn_2.1\CC2430\Projects\zstack\Samp #
#                          les\Coordinator\CC2430DB\CoordinatorEB\Obj\ -e     #
#                          -z9 --no_code_motion --debug --core=plain          #
#                          --dptr=16,1 --data_model=large                     #
#                          --code_model=banked --calling_convention=xdata_ree #
#                          ntrant --place_constants=data --nr_virtual_regs 8  #
#                          -I E:\嵌入式开发\hit-wsn\src\hit_wsn_2.1\hit_wsn_2 #
#                          .1\CC2430\Projects\zstack\Samples\Coordinator\CC24 #
#                          30DB\ -I E:\嵌入式开发\hit-wsn\src\hit_wsn_2.1\hit #
#                          _wsn_2.1\CC2430\Projects\zstack\Samples\Coordinato #
#                          r\CC2430DB\..\SOURCE\ -I                           #
#                          E:\嵌入式开发\hit-wsn\src\hit_wsn_2.1\hit_wsn_2.1\ #
#                          CC2430\Projects\zstack\Samples\Coordinator\CC2430D #
#                          B\..\..\..\ZMAIN\TI2430DB\ -I                      #
#                          E:\嵌入式开发\hit-wsn\src\hit_wsn_2.1\hit_wsn_2.1\ #
#                          CC2430\Projects\zstack\Samples\Coordinator\CC2430D #
#                          B\..\..\..\..\..\COMPONENTS\MT\ -I                 #
#                          E:\嵌入式开发\hit-wsn\src\hit_wsn_2.1\hit_wsn_2.1\ #
#                          CC2430\Projects\zstack\Samples\Coordinator\CC2430D #
#                          B\..\..\..\..\..\COMPONENTS\HAL\INCLUDE\ -I        #
#                          E:\嵌入式开发\hit-wsn\src\hit_wsn_2.1\hit_wsn_2.1\ #
#                          CC2430\Projects\zstack\Samples\Coordinator\CC2430D #
#                          B\..\..\..\..\..\COMPONENTS\HAL\TARGET\CC2430EB\   #
#                          -I E:\嵌入式开发\hit-wsn\src\hit_wsn_2.1\hit_wsn_2 #
#                          .1\CC2430\Projects\zstack\Samples\Coordinator\CC24 #
#                          30DB\..\..\..\..\..\COMPONENTS\OSAL\MCU\CCSOC\ -I  #
#                          E:\嵌入式开发\hit-wsn\src\hit_wsn_2.1\hit_wsn_2.1\ #
#                          CC2430\Projects\zstack\Samples\Coordinator\CC2430D #
#                          B\..\..\..\..\..\COMPONENTS\OSAL\INCLUDE\ -I       #
#                          E:\嵌入式开发\hit-wsn\src\hit_wsn_2.1\hit_wsn_2.1\ #
#                          CC2430\Projects\zstack\Samples\Coordinator\CC2430D #
#                          B\..\..\..\..\..\COMPONENTS\STACK\AF\ -I           #
#                          E:\嵌入式开发\hit-wsn\src\hit_wsn_2.1\hit_wsn_2.1\ #
#                          CC2430\Projects\zstack\Samples\Coordinator\CC2430D #
#                          B\..\..\..\..\..\COMPONENTS\STACK\NWK\ -I          #
#                          E:\嵌入式开发\hit-wsn\src\hit_wsn_2.1\hit_wsn_2.1\ #
#                          CC2430\Projects\zstack\Samples\Coordinator\CC2430D #
#                          B\..\..\..\..\..\COMPONENTS\STACK\SEC\ -I          #
#                          E:\嵌入式开发\hit-wsn\src\hit_wsn_2.1\hit_wsn_2.1\ #
#                          CC2430\Projects\zstack\Samples\Coordinator\CC2430D #
#                          B\..\..\..\..\..\COMPONENTS\STACK\SYS\ -I          #
#                          E:\嵌入式开发\hit-wsn\src\hit_wsn_2.1\hit_wsn_2.1\ #
#                          CC2430\Projects\zstack\Samples\Coordinator\CC2430D #
#                          B\..\..\..\..\..\COMPONENTS\STACK\ZDO\ -I          #
#                          E:\嵌入式开发\hit-wsn\src\hit_wsn_2.1\hit_wsn_2.1\ #
#                          CC2430\Projects\zstack\Samples\Coordinator\CC2430D #
#                          B\..\..\..\..\..\COMPONENTS\ZMAC\F8W\ -I           #
#                          E:\嵌入式开发\hit-wsn\src\hit_wsn_2.1\hit_wsn_2.1\ #
#                          CC2430\Projects\zstack\Samples\Coordinator\CC2430D #
#                          B\..\..\..\..\..\COMPONENTS\ZMAC\ -I               #
#                          E:\嵌入式开发\hit-wsn\src\hit_wsn_2.1\hit_wsn_2.1\ #
#                          CC2430\Projects\zstack\Samples\Coordinator\CC2430D #
#                          B\..\..\..\..\..\COMPONENTS\SERVICES\SADDR\ -I     #
#                          E:\嵌入式开发\hit-wsn\src\hit_wsn_2.1\hit_wsn_2.1\ #
#                          CC2430\Projects\zstack\Samples\Coordinator\CC2430D #
#                          B\..\..\..\..\..\COMPONENTS\SERVICES\SDATA\ -I     #
#                          E:\嵌入式开发\hit-wsn\src\hit_wsn_2.1\hit_wsn_2.1\ #
#                          CC2430\Projects\zstack\Samples\Coordinator\CC2430D #
#                          B\..\..\..\..\..\COMPONENTS\MAC\INCLUDE\ -I        #
#                          E:\嵌入式开发\hit-wsn\src\hit_wsn_2.1\hit_wsn_2.1\ #
#                          CC2430\Projects\zstack\Samples\Coordinator\CC2430D #
#                          B\..\..\..\..\..\COMPONENTS\MAC\HIGH_LEVEL\ -I     #
#                          E:\嵌入式开发\hit-wsn\src\hit_wsn_2.1\hit_wsn_2.1\ #
#                          CC2430\Projects\zstack\Samples\Coordinator\CC2430D #
#                          B\..\..\..\..\..\COMPONENTS\MAC\LOW_LEVEL\SRF03\   #
#                          -I E:\嵌入式开发\hit-wsn\src\hit_wsn_2.1\hit_wsn_2 #
#                          .1\CC2430\Projects\zstack\Samples\Coordinator\CC24 #
#                          30DB\..\..\..\..\..\COMPONENTS\MAC\LOW_LEVEL\SRF03 #
#                          \SINGLE_CHIP\ -I "D:\Program Files\IAR             #
#                          Systems\Embedded Workbench 4.0 Evaluation          #
#                          version\8051\INC\" -I "D:\Program Files\IAR        #
#                          Systems\Embedded Workbench 4.0 Evaluation          #
#                          version\8051\INC\CLIB\"                            #
#    List file          =  E:\嵌入式开发\hit-wsn\src\hit_wsn_2.1\hit_wsn_2.1\ #
#                          CC2430\Projects\zstack\Samples\Coordinator\CC2430D #
#                          B\CoordinatorEB\List\GenericApp.lst                #
#    Object file        =  E:\嵌入式开发\hit-wsn\src\hit_wsn_2.1\hit_wsn_2.1\ #
#                          CC2430\Projects\zstack\Samples\Coordinator\CC2430D #
#                          B\CoordinatorEB\Obj\GenericApp.r51                 #
#                                                                             #
#                                                                             #
###############################################################################

E:\嵌入式开发\hit-wsn\src\hit_wsn_2.1\hit_wsn_2.1\CC2430\Projects\zstack\Samples\Coordinator\Source\GenericApp.c
      1          /**************************************************************************************************
      2            Filename:       GenericApp.c
      3            Revised:        $Date: 2007-10-27 17:16:54 -0700 (Sat, 27 Oct 2007) $
      4            Revision:       $Revision: 15793 $
      5          
      6            Description:    Generic Application (no Profile).
      7          
      8          
      9            Copyright 2004-2007 Texas Instruments Incorporated. All rights reserved.
     10          
     11            IMPORTANT: Your use of this Software is limited to those specific rights
     12            granted under the terms of a software license agreement between the user
     13            who downloaded the software, his/her employer (which must be your employer)
     14            and Texas Instruments Incorporated (the "License").  You may not use this
     15            Software unless you agree to abide by the terms of the License. The License
     16            limits your use, and you acknowledge, that the Software may not be modified,
     17            copied or distributed unless embedded on a Texas Instruments microcontroller
     18            or used solely and exclusively in conjunction with a Texas Instruments radio
     19            frequency transceiver, which is integrated into your product.  Other than for
     20            the foregoing purpose, you may not use, reproduce, copy, prepare derivative
     21            works of, modify, distribute, perform, display or sell this Software and/or
     22            its documentation for any purpose.
     23          
     24            YOU FURTHER ACKNOWLEDGE AND AGREE THAT THE SOFTWARE AND DOCUMENTATION ARE
     25            PROVIDED AS IS?WITHOUT WARRANTY OF ANY KIND, EITHER EXPRESS OR IMPLIED, 
     26            INCLUDING WITHOUT LIMITATION, ANY WARRANTY OF MERCHANTABILITY, TITLE, 
     27            NON-INFRINGEMENT AND FITNESS FOR A PARTICULAR PURPOSE. IN NO EVENT SHALL
     28            TEXAS INSTRUMENTS OR ITS LICENSORS BE LIABLE OR OBLIGATED UNDER CONTRACT,
     29            NEGLIGENCE, STRICT LIABILITY, CONTRIBUTION, BREACH OF WARRANTY, OR OTHER
     30            LEGAL EQUITABLE THEORY ANY DIRECT OR INDIRECT DAMAGES OR EXPENSES
     31            INCLUDING BUT NOT LIMITED TO ANY INCIDENTAL, SPECIAL, INDIRECT, PUNITIVE
     32            OR CONSEQUENTIAL DAMAGES, LOST PROFITS OR LOST DATA, COST OF PROCUREMENT
     33            OF SUBSTITUTE GOODS, TECHNOLOGY, SERVICES, OR ANY CLAIMS BY THIRD PARTIES
     34            (INCLUDING BUT NOT LIMITED TO ANY DEFENSE THEREOF), OR OTHER SIMILAR COSTS.
     35          
     36            Should you have any questions regarding your right to use this Software,
     37            contact Texas Instruments Incorporated at www.TI.com. 
     38          **************************************************************************************************/
     39          
     40          /*********************************************************************
     41            This application isn't intended to do anything useful, it is
     42            intended to be a simple example of an application's structure.
     43          
     44            This application sends "Hello World" to another "Generic"
     45            application every 15 seconds.  The application will also
     46            receive "Hello World" packets.
     47          
     48            The "Hello World" messages are sent/received as MSG type message.
     49          
     50            This applications doesn't have a profile, so it handles everything
     51            directly - itself.
     52          
     53            Key control:
     54              SW1:
     55              SW2:  initiates end device binding
     56              SW3:
     57              SW4:  initiates a match description request
     58          *********************************************************************/
     59          
     60          /*********************************************************************
     61           * INCLUDES
     62           */
     63          #include "OSAL.h"
     64          #include "AF.h"
     65          #include "ZDApp.h"
     66          #include "ZDObject.h"
     67          #include "ZDProfile.h"
     68          
     69          #include "GenericApp.h"
     70          #include "DebugTrace.h"
     71          
     72          #if !defined( WIN32 )
     73            #include "OnBoard.h"

   \                                 In  segment SFR_AN, at 0x86
   \   unsigned char volatile __sfr U0CSR
   \                     U0CSR:
   \   000000                DS 1

   \                                 In  segment SFR_AN, at 0x88
   \   union <unnamed> volatile __sfr _A_TCON
   \                     _A_TCON:
   \   000000                DS 1

   \                                 In  segment SFR_AN, at 0xa8
   \   union <unnamed> volatile __sfr _A_IEN0
   \                     _A_IEN0:
   \   000000                DS 1

   \                                 In  segment SFR_AN, at 0xc1
   \   unsigned char volatile __sfr U0DBUF
   \                     U0DBUF:
   \   000000                DS 1

   \                                 In  segment SFR_AN, at 0xc2
   \   unsigned char volatile __sfr U0BAUD
   \                     U0BAUD:
   \   000000                DS 1

   \                                 In  segment SFR_AN, at 0xc4
   \   unsigned char volatile __sfr U0UCR
   \                     U0UCR:
   \   000000                DS 1

   \                                 In  segment SFR_AN, at 0xc5
   \   unsigned char volatile __sfr U0GCR
   \                     U0GCR:
   \   000000                DS 1

   \                                 In  segment SFR_AN, at 0xc6
   \   unsigned char volatile __sfr CLKCON
   \                     CLKCON:
   \   000000                DS 1

   \                                 In  segment SFR_AN, at 0xe8
   \   union <unnamed> volatile __sfr _A_IRCON2
   \                     _A_IRCON2:
   \   000000                DS 1

   \                                 In  segment SFR_AN, at 0xf1
   \   unsigned char volatile __sfr PERCFG
   \                     PERCFG:
   \   000000                DS 1

   \                                 In  segment SFR_AN, at 0xf3
   \   unsigned char volatile __sfr P0SEL
   \                     P0SEL:
   \   000000                DS 1

   \                                 In  segment SFR_AN, at 0xf4
   \   unsigned char volatile __sfr P1SEL
   \                     P1SEL:
   \   000000                DS 1
     74          #endif
     75          
     76          /* HAL */
     77          #include "hal_lcd.h"
     78          #include "hal_led.h"
     79          #include "hal_key.h"
     80          #include "hal_uart.h"
     81          #include "uart0.h"
     82          
     83          //xiaoyang add 
     84          #include <string.h>
     85          #include <stdio.h>
     86          #include "SPIMgr.h"
     87          //#include <stdlib.h>
     88          /*********************************************************************
     89           * MACROS
     90           */
     91          /*********************************************************************
     92           * MACROS
     93           */
     94          //xiaoyang add
     95          /* See the important comment by the otaBuf declaration below concerning the
     96           * mandatory use of this macro vice directly invoking osal_mem_free().
     97           */
     98          #define FREE_OTABUF() { \
     99            if ( otaBuf ) \
    100            { \
    101              osal_mem_free( otaBuf ); \
    102            } \
    103            if ( otaBuf2 ) \
    104            { \
    105              SerialApp_SendData( otaBuf2, otaLen2 ); \
    106              otaBuf2 = NULL; \
    107            } \
    108            else \
    109            { \
    110              otaBuf = NULL; \
    111            } \
    112          }
    113          
    114          /*********************************************************************
    115           * CONSTANTS
    116           */
    117          
    118          #if !defined( SERIAL_APP_PORT )
    119            #define SERIAL_APP_PORT  1
    120          #endif
    121          
    122          #if !defined( SERIAL_APP_BAUD )
    123            // CC2430 only allows 38.4k or 115.2k.
    124            #define SERIAL_APP_BAUD  HAL_UART_BR_38400
    125            //#define SERIAL_APP_BAUD  HAL_UART_BR_115200
    126          #endif
    127          
    128          // When the Rx buf space is less than this threshold, invoke the Rx callback.
    129          #if !defined( SERIAL_APP_THRESH )
    130            #define SERIAL_APP_THRESH  48
    131          #endif
    132          
    133          #if !defined( SERIAL_APP_RX_MAX )
    134            #if (defined( HAL_UART_DMA )) && HAL_UART_DMA
    135              #define SERIAL_APP_RX_MAX  128
    136            #else
    137              /* The generic safe Rx minimum is 48, but if you know your PC App will not
    138               * continue to send more than a byte after receiving the ~CTS, lower max
    139               * here and safe min in _hal_uart.c to just 8.
    140               */
    141              #define SERIAL_APP_RX_MAX  64
    142            #endif
    143          #endif
    144          
    145          #if !defined( SERIAL_APP_TX_MAX )
    146            #if (defined( HAL_UART_DMA )) && HAL_UART_DMA
    147            #define SERIAL_APP_TX_MAX  128
    148            #else
    149              #define SERIAL_APP_TX_MAX  64
    150            #endif
    151          #endif
    152          
    153          // Millisecs of idle time after a byte is received before invoking Rx callback.
    154          #if !defined( SERIAL_APP_IDLE )
    155            #define SERIAL_APP_IDLE  6
    156          #endif
    157          
    158          // This is the desired byte count per OTA message.
    159          #if !defined( SERIAL_APP_RX_CNT )
    160            #if (defined( HAL_UART_DMA )) && HAL_UART_DMA
    161              #define SERIAL_APP_RX_CNT  80
    162            #else
    163              #define SERIAL_APP_RX_CNT  6
    164            #endif
    165          #endif
    166          
    167          // Loopback Rx bytes to Tx for thruput testing.
    168          #if !defined( SERIAL_APP_LOOPBACK )
    169            #define SERIAL_APP_LOOPBACK  FALSE
    170          #endif
    171          
    172          #if SERIAL_APP_LOOPBACK
    173            #define SERIALAPP_TX_RTRY_EVT      0x0010
    174            #define SERIALAPP_TX_RTRY_TIMEOUT  250
    175          #endif
    176          
    177          /*********************************************************************
    178           * CONSTANTS
    179           */
    180          
    181          /*********************************************************************
    182           * TYPEDEFS
    183           */
    184          
    185          /*********************************************************************
    186           * DEBUG
    187           */
    188          #define _m_debug    1
    189          
    190          /*********************************************************************
    191           * GLOBAL VARIABLES
    192           */
    193          
    194          // This list should be filled with Application specific Cluster IDs.

   \                                 In  segment XDATA_I, align 1, keep-with-next
    195          const cId_t GenericApp_ClusterList[GENERICAPP_MAX_CLUSTERS] =
   \                     GenericApp_ClusterList:
   \   000000                DS 2
   \   000002                REQUIRE `?<Initializer for GenericApp_ClusterList>`
   \   000002                REQUIRE __INIT_XDATA_I
    196          {
    197            GENERICAPP_CLUSTERID
    198          };
    199          

   \                                 In  segment XDATA_I, align 1, keep-with-next
    200          const SimpleDescriptionFormat_t GenericApp_SimpleDesc =
   \                     GenericApp_SimpleDesc:
   \   000000                DS 12
   \   00000C                REQUIRE `?<Initializer for GenericApp_SimpleDesc>`
   \   00000C                REQUIRE __INIT_XDATA_I
    201          {
    202            GENERICAPP_ENDPOINT,              //  int Endpoint;
    203            GENERICAPP_PROFID,                //  uint16 AppProfId[2];
    204            GENERICAPP_DEVICEID,              //  uint16 AppDeviceId[2];
    205            GENERICAPP_DEVICE_VERSION,        //  int   AppDevVer:4;
    206            GENERICAPP_FLAGS,                 //  int   AppFlags:4;
    207            GENERICAPP_MAX_CLUSTERS,          //  byte  AppNumInClusters;
    208            (cId_t *)GenericApp_ClusterList,  //  byte *pAppInClusterList;
    209            GENERICAPP_MAX_CLUSTERS,          //  byte  AppNumInClusters;
    210            (cId_t *)GenericApp_ClusterList   //  byte *pAppInClusterList;
    211          };
    212          
    213          // This is the Endpoint/Interface description.  It is defined here, but
    214          // filled-in in GenericApp_Init().  Another way to go would be to fill
    215          // in the structure here and make it a "const" (in code space).  The
    216          // way it's defined in this sample app it is define in RAM.

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    217          endPointDesc_t GenericApp_epDesc;
   \                     GenericApp_epDesc:
   \   000000                DS 6
   \   000006                REQUIRE __INIT_XDATA_Z
    218          
    219          /*********************************************************************
    220           * EXTERNAL VARIABLES
    221           */
    222          
    223          /*********************************************************************
    224           * EXTERNAL FUNCTIONS
    225           */
    226          
    227          /*********************************************************************
    228           * LOCAL VARIABLES
    229           */

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    230          byte GenericApp_TaskID;   // Task ID for internal task/event processing
   \                     GenericApp_TaskID:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z
    231                                    // This variable will be received when
    232                                    // GenericApp_Init() is called.

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    233          devStates_t GenericApp_NwkState;
   \                     GenericApp_NwkState:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z
    234          
    235          

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    236          byte GenericApp_TransID;  // This is the unique message ID (counter)
   \                     GenericApp_TransID:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z
    237          

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    238          afAddrType_t GenericApp_DstAddr;
   \                     GenericApp_DstAddr:
   \   000000                DS 4
   \   000004                REQUIRE __INIT_XDATA_Z
    239          
    240          
    241          
    242          //------------------------------------------------------------------------------
    243          //xiaoyang add, data_trans task
    244          //------------------------------------------------------------------------------

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    245          byte data_trans_TaskID;
   \                     data_trans_TaskID:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z
    246          
    247          
    248          /*********************************************************************
    249           * LOCAL FUNCTIONS
    250           */
    251          void GenericApp_ProcessZDOMsgs( zdoIncomingMsg_t *inMsg );
    252          void GenericApp_HandleKeys( byte shift, byte keys );
    253          void GenericApp_MessageMSGCB( afIncomingMSGPacket_t *pckt );
    254          void GenericApp_SendTheMessage( void );
    255          
    256          /*********************************************************************
    257           * NETWORK LAYER CALLBACKS
    258           */
    259          
    260          /*********************************************************************
    261           * PUBLIC FUNCTIONS
    262           */
    263          
    264          /*********************************************************************
    265           * @fn      GenericApp_Init
    266           *
    267           * @brief   Initialization function for the Generic App Task.
    268           *          This is called during initialization and should contain
    269           *          any application specific initialization (ie. hardware
    270           *          initialization/setup, table initialization, power up
    271           *          notificaiton ... ).
    272           *
    273           * @param   task_id - the ID assigned by OSAL.  This ID should be
    274           *                    used to send messages and set timers.
    275           *
    276           * @return  none
    277           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    278          void GenericApp_Init( byte task_id )
   \                     GenericApp_Init:
    279          {
   \   000000   C082         PUSH    DPL
   \   000002   C083         PUSH    DPH
   \   000004                ; Saved register size: 2
   \   000004                ; Auto size: 0
    280            GenericApp_TaskID = task_id;
   \   000004   E9           MOV     A,R1
   \   000005   90....       MOV     DPTR,#GenericApp_TaskID
   \   000008   F0           MOVX    @DPTR,A
    281            GenericApp_NwkState = DEV_INIT;
   \   000009   7401         MOV     A,#0x1
   \   00000B   90....       MOV     DPTR,#GenericApp_NwkState
   \   00000E   F0           MOVX    @DPTR,A
    282            GenericApp_TransID = 0;
   \   00000F   E4           CLR     A
   \   000010   90....       MOV     DPTR,#GenericApp_TransID
   \   000013   F0           MOVX    @DPTR,A
    283            //xiaoyang add
    284            //halUARTCfg_t uartConfig;
    285            // Device hardware initialization can be added here or in main() (Zmain.c).
    286            // If the hardware is application specific - add it here.
    287            // If the hardware is other parts of the device add it in main().
    288          
    289            GenericApp_DstAddr.addrMode = (afAddrMode_t)AddrNotPresent;
   \   000014   90....       MOV     DPTR,#(GenericApp_DstAddr + 2)
   \   000017   F0           MOVX    @DPTR,A
    290            GenericApp_DstAddr.endPoint = 0;
   \   000018   90....       MOV     DPTR,#(GenericApp_DstAddr + 3)
   \   00001B   F0           MOVX    @DPTR,A
    291            GenericApp_DstAddr.addr.shortAddr = 0;
   \   00001C   90....       MOV     DPTR,#GenericApp_DstAddr
   \   00001F   F0           MOVX    @DPTR,A
   \   000020   A3           INC     DPTR
   \   000021   F0           MOVX    @DPTR,A
    292          
    293            // Fill out the endpoint description.
    294            GenericApp_epDesc.endPoint = GENERICAPP_ENDPOINT;
   \   000022   740A         MOV     A,#0xa
   \   000024   90....       MOV     DPTR,#GenericApp_epDesc
   \   000027   F0           MOVX    @DPTR,A
    295            GenericApp_epDesc.task_id = &GenericApp_TaskID;
   \   000028   90....       MOV     DPTR,#(GenericApp_epDesc + 1)
   \   00002B   74..         MOV     A,#(GenericApp_TaskID & 0xff)
   \   00002D   F0           MOVX    @DPTR,A
   \   00002E   A3           INC     DPTR
   \   00002F   74..         MOV     A,#((GenericApp_TaskID >> 8) & 0xff)
   \   000031   F0           MOVX    @DPTR,A
    296            GenericApp_epDesc.simpleDesc
    297                      = (SimpleDescriptionFormat_t *)&GenericApp_SimpleDesc;
   \   000032   90....       MOV     DPTR,#(GenericApp_epDesc + 3)
   \   000035   74..         MOV     A,#(GenericApp_SimpleDesc & 0xff)
   \   000037   F0           MOVX    @DPTR,A
   \   000038   A3           INC     DPTR
   \   000039   74..         MOV     A,#((GenericApp_SimpleDesc >> 8) & 0xff)
   \   00003B   F0           MOVX    @DPTR,A
    298            GenericApp_epDesc.latencyReq = noLatencyReqs;
   \   00003C   E4           CLR     A
   \   00003D   90....       MOV     DPTR,#(GenericApp_epDesc + 5)
   \   000040   F0           MOVX    @DPTR,A
    299          
    300            // Register the endpoint description with the AF
    301            afRegister( &GenericApp_epDesc );
   \   000041                ; Setup parameters for call to function afRegister
   \   000041   7A..         MOV     R2,#(GenericApp_epDesc & 0xff)
   \   000043   7B..         MOV     R3,#((GenericApp_epDesc >> 8) & 0xff)
   \   000045   12....       LCALL   ??afRegister?relay
    302          
    303            // Register for all key events - This app will handle all key events
    304            RegisterForKeys( GenericApp_TaskID );
   \   000048                ; Setup parameters for call to function RegisterForKeys
   \   000048   90....       MOV     DPTR,#GenericApp_TaskID
   \   00004B   E0           MOVX    A,@DPTR
   \   00004C   F9           MOV     R1,A
   \   00004D   12....       LCALL   ??RegisterForKeys?relay
    305          
    306            // Update the display
    307          #if defined ( LCD_SUPPORTED )
    308              HalLcdWriteString( "GenericApp", HAL_LCD_LINE_1 );
   \   000050                ; Setup parameters for call to function HalLcdWriteString
   \   000050   7900         MOV     R1,#0x0
   \   000052   7A..         MOV     R2,#(`?<Constant "GenericApp">` & 0xff)
   \   000054   7B..         MOV     R3,#((`?<Constant "GenericApp">` >> 8) & 0xff)
   \   000056   12....       LCALL   ??HalLcdWriteString?relay
    309          #endif
    310              /*
    311            //xiaoyang add
    312            uartConfig.configured           = TRUE;              // 2430 don't care.
    313            uartConfig.baudRate             = SERIAL_APP_BAUD;
    314            uartConfig.flowControl          = TRUE;
    315            uartConfig.flowControlThreshold = SERIAL_APP_THRESH;
    316            uartConfig.rx.maxBufSize        = SERIAL_APP_RX_MAX;
    317            uartConfig.tx.maxBufSize        = SERIAL_APP_TX_MAX;
    318            uartConfig.idleTimeout          = SERIAL_APP_IDLE;   // 2430 don't care.
    319            uartConfig.intEnable            = TRUE;              // 2430 don't care.
    320          #if SERIAL_APP_LOOPBACK
    321            uartConfig.callBackFunc         = NULL;
    322          #else
    323            uartConfig.callBackFunc         = NULL;
    324          #endif
    325            HalUARTOpen (SERIAL_APP_PORT, &uartConfig);
    326            */
    327            //
    328            ZDO_RegisterForZDOMsg( GenericApp_TaskID, End_Device_Bind_rsp );
   \   000059                ; Setup parameters for call to function ZDO_RegisterForZDOMsg
   \   000059   7A20         MOV     R2,#0x20
   \   00005B   7B80         MOV     R3,#-0x80
   \   00005D   90....       MOV     DPTR,#GenericApp_TaskID
   \   000060   E0           MOVX    A,@DPTR
   \   000061   F9           MOV     R1,A
   \   000062   12....       LCALL   ??ZDO_RegisterForZDOMsg?relay
    329            ZDO_RegisterForZDOMsg( GenericApp_TaskID, Match_Desc_rsp );
   \   000065                ; Setup parameters for call to function ZDO_RegisterForZDOMsg
   \   000065   7A06         MOV     R2,#0x6
   \   000067   7B80         MOV     R3,#-0x80
   \   000069   90....       MOV     DPTR,#GenericApp_TaskID
   \   00006C   E0           MOVX    A,@DPTR
   \   00006D   F9           MOV     R1,A
   \   00006E   12....       LCALL   ??ZDO_RegisterForZDOMsg?relay
    330            
    331            //xiaoyang ADD@2011.5.26
    332            initUART();
   \   000071                ; Setup parameters for call to function initUART
   \   000071   12....       LCALL   ??initUART?relay
    333          }
   \   000074   02....       LJMP    ?Subroutine33 & 0xFFFF

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine33:
   \   000000   D083         POP     DPH
   \   000002   D082         POP     DPL
   \   000004   02....       LJMP    ?BRET
    334          
    335          /*********************************************************************
    336           * @fn      GenericApp_ProcessEvent
    337           *
    338           * @brief   Generic Application Task event processor.  This function
    339           *          is called to process all events for the task.  Events
    340           *          include timers, messages and any other user defined events.
    341           *
    342           * @param   task_id  - The OSAL assigned task ID.
    343           * @param   events - events to process.  This is a bit map and can
    344           *                   contain more than one event.
    345           *
    346           * @return  none
    347           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    348          UINT16 GenericApp_ProcessEvent( byte task_id, UINT16 events )
   \                     GenericApp_ProcessEvent:
    349          {
   \   000000   74F4         MOV     A,#-0xc
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 12
   \   000005                ; Auto size: 0
   \   000005   EA           MOV     A,R2
   \   000006   FE           MOV     R6,A
   \   000007   EB           MOV     A,R3
   \   000008   FF           MOV     R7,A
    350            afIncomingMSGPacket_t *MSGpkt;
    351            afDataConfirm_t *afDataConfirm;
    352          
    353            // Data Confirmation message fields
    354            byte sentEP;
    355            ZStatus_t sentStatus;
    356            byte sentTransID;       // This should match the value sent
    357          
    358            if ( events & SYS_EVENT_MSG )
   \   000009   7480         MOV     A,#-0x80
   \   00000B   5F           ANL     A,R7
   \   00000C   F9           MOV     R1,A
   \   00000D   E4           CLR     A
   \   00000E   7001         JNZ     ??GenericApp_ProcessEvent_0
   \   000010   E9           MOV     A,R1
   \                     ??GenericApp_ProcessEvent_0:
   \   000011   6077         JZ      ??GenericApp_ProcessEvent_1
    359            {
    360              MSGpkt = (afIncomingMSGPacket_t *)osal_msg_receive( GenericApp_TaskID );
   \   000013                ; Setup parameters for call to function osal_msg_receive
   \   000013   8013         SJMP    ??GenericApp_ProcessEvent_2
    361              while ( MSGpkt )
    362              {
    363                switch ( MSGpkt->hdr.event )
    364                {
    365                  case ZDO_CB_MSG:
    366                    GenericApp_ProcessZDOMsgs( (zdoIncomingMsg_t *)MSGpkt );
    367                    break;
    368          
    369                  case KEY_CHANGE:
    370                    GenericApp_HandleKeys( ((keyChange_t *)MSGpkt)->state, ((keyChange_t *)MSGpkt)->keys );
    371                    break;
    372          
    373                  case AF_DATA_CONFIRM_CMD:
    374                    // This message is received as a confirmation of a data packet sent.
    375                    // The status is of ZStatus_t type [defined in ZComDef.h]
    376                    // The message fields are defined in AF.h
    377                    afDataConfirm = (afDataConfirm_t *)MSGpkt;
    378                    sentEP = afDataConfirm->endpoint;
    379                    sentStatus = afDataConfirm->hdr.status;
    380                    sentTransID = afDataConfirm->transID;
    381                    (void)sentEP;
    382                    (void)sentTransID;
    383          
    384                    // Action taken when confirmation is received.
    385                    if ( sentStatus != ZSuccess )
    386                    {
    387                      // The data wasn't delivered -- Do something
    388                    }
    389                    break;
    390          
    391                  case AF_INCOMING_MSG_CMD:
    392                    GenericApp_MessageMSGCB( MSGpkt );
    393                    break;
    394          
    395                  case ZDO_STATE_CHANGE:
    396                    GenericApp_NwkState = (devStates_t)(MSGpkt->hdr.status);
   \                     ??GenericApp_ProcessEvent_3:
   \   000015   85..82       MOV     DPL,?V0 + 0
   \   000018   85..83       MOV     DPH,?V0 + 1
   \   00001B   A3           INC     DPTR
   \   00001C   E0           MOVX    A,@DPTR
   \   00001D   90....       MOV     DPTR,#GenericApp_NwkState
   \   000020   F0           MOVX    @DPTR,A
    397                    if ( (GenericApp_NwkState == DEV_ZB_COORD)
    398                        || (GenericApp_NwkState == DEV_ROUTER)
    399                        || (GenericApp_NwkState == DEV_END_DEVICE) )
    400                    { 
    401                    }
    402                    break;
    403          
    404                  default:
    405                    break;
    406                }
    407          
    408                // Release the memory
    409                osal_msg_deallocate( (uint8 *)MSGpkt );
   \                     ??GenericApp_ProcessEvent_4:
   \   000021                ; Setup parameters for call to function osal_msg_deallocate
   \   000021   AA..         MOV     R2,?V0 + 0
   \   000023   AB..         MOV     R3,?V0 + 1
   \   000025   12....       LCALL   ??osal_msg_deallocate?relay
    410          
    411                // Next
    412                MSGpkt = (afIncomingMSGPacket_t *)osal_msg_receive( GenericApp_TaskID );
   \   000028                ; Setup parameters for call to function osal_msg_receive
   \                     ??GenericApp_ProcessEvent_2:
   \   000028   90....       MOV     DPTR,#GenericApp_TaskID
   \   00002B   E0           MOVX    A,@DPTR
   \   00002C   F9           MOV     R1,A
   \   00002D   12....       LCALL   ??osal_msg_receive?relay
   \   000030   8A..         MOV     ?V0 + 0,R2
   \   000032   8B..         MOV     ?V0 + 1,R3
   \   000034   E5..         MOV     A,?V0 + 0
   \   000036   7002         JNZ     ??GenericApp_ProcessEvent_5
   \   000038   E5..         MOV     A,?V0 + 1
   \                     ??GenericApp_ProcessEvent_5:
   \   00003A   6046         JZ      ??GenericApp_ProcessEvent_6
   \   00003C   85..82       MOV     DPL,?V0 + 0
   \   00003F   85..83       MOV     DPH,?V0 + 1
   \   000042   E0           MOVX    A,@DPTR
   \   000043   12....       LCALL   ?UC_SWITCH_SPARSE
   \                     `?<Jumptable for GenericApp_ProcessEvent>_0`:
   \   000046   00           DB        0
   \   000047   04           DB        4
   \   000048   1A           DB        26
   \   000049   ....         DW        ??GenericApp_ProcessEvent_7
   \   00004B   C0           DB        192
   \   00004C   ....         DW        ??GenericApp_ProcessEvent_8
   \   00004E   D1           DB        209
   \   00004F   ....         DW        ??GenericApp_ProcessEvent_3
   \   000051   D3           DB        211
   \   000052   ....         DW        ??GenericApp_ProcessEvent_9
   \   000054   ....         DW        ??GenericApp_ProcessEvent_4
   \                     ??GenericApp_ProcessEvent_9:
   \   000056                ; Setup parameters for call to function GenericApp_ProcessZDOMsgs
   \   000056   AA..         MOV     R2,?V0 + 0
   \   000058   AB..         MOV     R3,?V0 + 1
   \   00005A   12....       LCALL   ??GenericApp_ProcessZDOMsgs?relay
   \   00005D   80C2         SJMP    ??GenericApp_ProcessEvent_4
   \                     ??GenericApp_ProcessEvent_8:
   \   00005F                ; Setup parameters for call to function GenericApp_HandleKeys
   \   00005F   85..82       MOV     DPL,?V0 + 0
   \   000062   85..83       MOV     DPH,?V0 + 1
   \   000065   A3           INC     DPTR
   \   000066   A3           INC     DPTR
   \   000067   A3           INC     DPTR
   \   000068   E0           MOVX    A,@DPTR
   \   000069   FA           MOV     R2,A
   \   00006A   85..82       MOV     DPL,?V0 + 0
   \   00006D   85..83       MOV     DPH,?V0 + 1
   \   000070   A3           INC     DPTR
   \   000071   A3           INC     DPTR
   \   000072   E0           MOVX    A,@DPTR
   \   000073   F9           MOV     R1,A
   \   000074   12....       LCALL   ??GenericApp_HandleKeys?relay
   \   000077   80A8         SJMP    ??GenericApp_ProcessEvent_4
   \                     ??GenericApp_ProcessEvent_7:
   \   000079                ; Setup parameters for call to function GenericApp_MessageMSGCB
   \   000079   AA..         MOV     R2,?V0 + 0
   \   00007B   AB..         MOV     R3,?V0 + 1
   \   00007D   12....       LCALL   ??GenericApp_MessageMSGCB?relay
   \   000080   809F         SJMP    ??GenericApp_ProcessEvent_4
    413              }
    414          
    415              // return unprocessed events
    416              return (events ^ SYS_EVENT_MSG);
   \                     ??GenericApp_ProcessEvent_6:
   \   000082   EE           MOV     A,R6
   \   000083   FA           MOV     R2,A
   \   000084   7480         MOV     A,#-0x80
   \   000086   6F           XRL     A,R7
   \   000087   FB           MOV     R3,A
   \   000088   800F         SJMP    ??GenericApp_ProcessEvent_10
    417            }
    418          
    419            // Send a message out - This event is generated by a timer
    420            //  (setup in GenericApp_Init()).
    421            if ( events & GENERICAPP_SEND_MSG_EVT )
   \                     ??GenericApp_ProcessEvent_1:
   \   00008A   EE           MOV     A,R6
   \   00008B   A2E0         MOV     C,0xE0 /* A   */.0
   \   00008D   5006         JNC     ??GenericApp_ProcessEvent_11
    422            {
    423              // Send "the" message
    424              //GenericApp_SendTheMessage();
    425          
    426              // Setup to send message again
    427              //osal_start_timerEx( GenericApp_TaskID,
    428                //                  GENERICAPP_SEND_MSG_EVT,
    429                  //                GENERICAPP_SEND_MSG_TIMEOUT );
    430          
    431              // return unprocessed events
    432              return (events ^ GENERICAPP_SEND_MSG_EVT);
   \   00008F   7401         MOV     A,#0x1
   \   000091   6E           XRL     A,R6
   \   000092   FA           MOV     R2,A
   \   000093   8004         SJMP    ??GenericApp_ProcessEvent_10
    433            }
    434          
    435            // Discard unknown events
    436            return 0;
   \                     ??GenericApp_ProcessEvent_11:
   \   000095   7A00         MOV     R2,#0x0
   \   000097   7B00         MOV     R3,#0x0
   \                     ??GenericApp_ProcessEvent_10:
   \   000099                REQUIRE ?Subroutine34
   \   000099                ; // Fall through to label ?Subroutine34
    437          }

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine34:
   \   000000   7F04         MOV     R7,#0x4
   \   000002   02....       LJMP    ?BANKED_LEAVE_XDATA
    438          
    439          /*********************************************************************
    440           * Event Generation Functions
    441           */
    442          /*********************************************************************
    443           * @fn      GenericApp_ProcessZDOMsgs()
    444           *
    445           * @brief   Process response messages
    446           *
    447           * @param   none
    448           *
    449           * @return  none
    450           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    451          void GenericApp_ProcessZDOMsgs( zdoIncomingMsg_t *inMsg )
   \                     GenericApp_ProcessZDOMsgs:
    452          {
   \   000000   74F6         MOV     A,#-0xa
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 10
   \   000005                ; Auto size: 0
    453            switch ( inMsg->clusterID )
   \   000005   EA           MOV     A,R2
   \   000006   240C         ADD     A,#0xc
   \   000008   F582         MOV     DPL,A
   \   00000A   EB           MOV     A,R3
   \   00000B   12....       LCALL   ??Subroutine16_1 & 0xFFFF
   \                     ??CrossCallReturnLabel_33:
   \   00000E   E0           MOVX    A,@DPTR
   \   00000F   F5..         MOV     ?V0 + 0,A
   \   000011   A3           INC     DPTR
   \   000012   E0           MOVX    A,@DPTR
   \   000013   F5..         MOV     ?V0 + 1,A
   \   000015   78..         MOV     R0,#?V0 + 0
   \   000017   12....       LCALL   ?US_SWITCH_SPARSE
   \                     `?<Jumptable for GenericApp_ProcessZDOMsgs>_0`:
   \   00001A   0000         DW        0
   \   00001C   0200         DW        2
   \   00001E   0680         DW        32774
   \   000020   ....         DW        ??GenericApp_ProcessZDOMsgs_0
   \   000022   2080         DW        32800
   \   000024   ....         DW        ??GenericApp_ProcessZDOMsgs_1
   \   000026   ....         DW        ??GenericApp_ProcessZDOMsgs_2
    454            {
    455              case End_Device_Bind_rsp:
    456                if ( ZDO_ParseBindRsp( inMsg ) == ZSuccess )
   \                     ??GenericApp_ProcessZDOMsgs_1:
   \   000028   EA           MOV     A,R2
   \   000029   2411         ADD     A,#0x11
   \   00002B   12....       LCALL   ?Subroutine14 & 0xFFFF
   \                     ??CrossCallReturnLabel_29:
   \   00002E   7009         JNZ     ??GenericApp_ProcessZDOMsgs_3
    457                {
    458                  // Light LED
    459                  HalLedSet( HAL_LED_4, HAL_LED_MODE_ON );
   \   000030                ; Setup parameters for call to function HalLedSet
   \   000030   7A01         MOV     R2,#0x1
   \                     ??GenericApp_ProcessZDOMsgs_4:
   \   000032   7908         MOV     R1,#0x8
   \   000034   12....       LCALL   ??HalLedSet?relay
   \   000037   8055         SJMP    ??GenericApp_ProcessZDOMsgs_2
    460                }
    461          #if defined(BLINK_LEDS)
    462                else
    463                {
    464                  // Flash LED to show failure
    465                  HalLedSet ( HAL_LED_4, HAL_LED_MODE_FLASH );
   \                     ??GenericApp_ProcessZDOMsgs_3:
   \   000039                ; Setup parameters for call to function HalLedSet
   \   000039   7A04         MOV     R2,#0x4
   \   00003B   80F5         SJMP    ??GenericApp_ProcessZDOMsgs_4
    466                }
    467          #endif
    468                break;
    469          
    470              case Match_Desc_rsp:
    471                {
    472                  ZDO_ActiveEndpointRsp_t *pRsp = ZDO_ParseEPListRsp( inMsg );
   \                     ??GenericApp_ProcessZDOMsgs_0:
   \   00003D                ; Setup parameters for call to function ZDO_ParseEPListRsp
   \   00003D   12....       LCALL   ??ZDO_ParseEPListRsp?relay
   \   000040   8A..         MOV     ?V0 + 0,R2
   \   000042   8B..         MOV     ?V0 + 1,R3
   \   000044   AE..         MOV     R6,?V0 + 0
   \   000046   AF..         MOV     R7,?V0 + 1
    473                  if ( pRsp )
   \   000048   EE           MOV     A,R6
   \   000049   7001         JNZ     ??GenericApp_ProcessZDOMsgs_5
   \   00004B   EF           MOV     A,R7
   \                     ??GenericApp_ProcessZDOMsgs_5:
   \   00004C   6040         JZ      ??GenericApp_ProcessZDOMsgs_2
    474                  {
    475                    if ( pRsp->status == ZSuccess && pRsp->cnt )
   \   00004E   8E82         MOV     DPL,R6
   \   000050   8F83         MOV     DPH,R7
   \   000052   E0           MOVX    A,@DPTR
   \   000053   7032         JNZ     ??GenericApp_ProcessZDOMsgs_6
   \   000055   A3           INC     DPTR
   \   000056   A3           INC     DPTR
   \   000057   A3           INC     DPTR
   \   000058   E0           MOVX    A,@DPTR
   \   000059   602C         JZ      ??GenericApp_ProcessZDOMsgs_6
    476                    {
    477                      GenericApp_DstAddr.addrMode = (afAddrMode_t)Addr16Bit;
   \   00005B   7402         MOV     A,#0x2
   \   00005D   90....       MOV     DPTR,#(GenericApp_DstAddr + 2)
   \   000060   F0           MOVX    @DPTR,A
    478                      GenericApp_DstAddr.addr.shortAddr = pRsp->nwkAddr;
   \   000061   8E82         MOV     DPL,R6
   \   000063   8F83         MOV     DPH,R7
   \   000065   A3           INC     DPTR
   \   000066   E0           MOVX    A,@DPTR
   \   000067   F8           MOV     R0,A
   \   000068   A3           INC     DPTR
   \   000069   E0           MOVX    A,@DPTR
   \   00006A   F9           MOV     R1,A
   \   00006B   90....       MOV     DPTR,#GenericApp_DstAddr
   \   00006E   E8           MOV     A,R0
   \   00006F   F0           MOVX    @DPTR,A
   \   000070   A3           INC     DPTR
   \   000071   E9           MOV     A,R1
   \   000072   F0           MOVX    @DPTR,A
    479                      // Take the first endpoint, Can be changed to search through endpoints
    480                      GenericApp_DstAddr.endPoint = pRsp->epList[0];
   \   000073   8E82         MOV     DPL,R6
   \   000075   8F83         MOV     DPH,R7
   \   000077   A3           INC     DPTR
   \   000078   A3           INC     DPTR
   \   000079   A3           INC     DPTR
   \   00007A   A3           INC     DPTR
   \   00007B   E0           MOVX    A,@DPTR
   \   00007C   90....       MOV     DPTR,#(GenericApp_DstAddr + 3)
   \   00007F   F0           MOVX    @DPTR,A
    481          
    482                      // Light LED
    483                      HalLedSet( HAL_LED_4, HAL_LED_MODE_ON );
   \   000080                ; Setup parameters for call to function HalLedSet
   \   000080   7A01         MOV     R2,#0x1
   \   000082   7908         MOV     R1,#0x8
   \   000084   12....       LCALL   ??HalLedSet?relay
    484                    }
    485                    osal_mem_free( pRsp );
   \                     ??GenericApp_ProcessZDOMsgs_6:
   \   000087                ; Setup parameters for call to function osal_mem_free
   \   000087   EE           MOV     A,R6
   \   000088   FA           MOV     R2,A
   \   000089   EF           MOV     A,R7
   \   00008A   FB           MOV     R3,A
   \   00008B   12....       LCALL   ??osal_mem_free?relay
    486                  }
    487                }
    488                break;
    489            }
    490          }
   \                     ??GenericApp_ProcessZDOMsgs_2:
   \   00008E   02....       LJMP    ??Subroutine35_0 & 0xFFFF

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine35:
   \   000000   12....       LCALL   ?DEALLOC_XSTACK8
   \                     ??Subroutine35_0:
   \   000003   7F02         MOV     R7,#0x2
   \   000005   02....       LJMP    ?BANKED_LEAVE_XDATA

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine14:
   \   000000   F582         MOV     DPL,A
   \   000002   EB           MOV     A,R3
   \   000003   3400         ADDC    A,#0x0
   \   000005   F583         MOV     DPH,A
   \   000007   E0           MOVX    A,@DPTR
   \   000008   F8           MOV     R0,A
   \   000009   A3           INC     DPTR
   \   00000A   E0           MOVX    A,@DPTR
   \   00000B   F583         MOV     DPH,A
   \   00000D   8882         MOV     DPL,R0
   \   00000F   E0           MOVX    A,@DPTR
   \   000010   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine16:
   \   000000   E8           MOV     A,R0
   \   000001   240B         ADD     A,#0xb
   \                     ??Subroutine16_0:
   \   000003   F582         MOV     DPL,A
   \   000005   E9           MOV     A,R1
   \                     ??Subroutine16_1:
   \   000006   3400         ADDC    A,#0x0
   \   000008   F583         MOV     DPH,A
   \   00000A   22           RET
    491          
    492          /*********************************************************************
    493           * @fn      GenericApp_HandleKeys
    494           *
    495           * @brief   Handles all key events for this device.
    496           *
    497           * @param   shift - true if in shift/alt.
    498           * @param   keys - bit field for key events. Valid entries:
    499           *                 HAL_KEY_SW_4
    500           *                 HAL_KEY_SW_3
    501           *                 HAL_KEY_SW_2
    502           *                 HAL_KEY_SW_1
    503           *
    504           * @return  none
    505           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    506          void GenericApp_HandleKeys( byte shift, byte keys )
   \                     GenericApp_HandleKeys:
    507          {
   \   000000   74F6         MOV     A,#-0xa
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 10
   \   000005                ; Auto size: 9
   \   000005   74F7         MOV     A,#-0x9
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   \   00000A   EA           MOV     A,R2
   \   00000B   FE           MOV     R6,A
    508            zAddrType_t dstAddr;
    509          
    510            // Shift is used to make each button/switch dual purpose.
    511            if ( shift )
   \   00000C   E9           MOV     A,R1
   \   00000D   6003         JZ      $+5
   \   00000F   02....       LJMP    ??GenericApp_HandleKeys_0 & 0xFFFF
    512            {
    513              if ( keys & HAL_KEY_SW_1 )
    514              {
    515              }
    516              if ( keys & HAL_KEY_SW_2 )
    517              {
    518              }
    519              if ( keys & HAL_KEY_SW_3 )
    520              {
    521              }
    522              if ( keys & HAL_KEY_SW_4 )
    523              {
    524              }
    525            }
    526            else
    527            {
    528              if ( keys & HAL_KEY_SW_1 )
   \   000012   EE           MOV     A,R6
   \   000013   A2E0         MOV     C,0xE0 /* A   */.0
   \   000015   500D         JNC     ??GenericApp_HandleKeys_1
    529              {
    530          #if _m_debug
    531                HalUARTWrite(0,"hal sw1 pressed!\r\n",strlen("hal sw1 pressed!\r\n"));
   \   000017                ; Setup parameters for call to function HalUARTWrite
   \   000017   7C12         MOV     R4,#0x12
   \   000019   7D00         MOV     R5,#0x0
   \   00001B   7A..         MOV     R2,#(`?<Constant "hal sw1 pressed!\\r\\n">` & 0xff)
   \   00001D   7B..         MOV     R3,#((`?<Constant "hal sw1 pressed!\\r\\n">` >> 8) & 0xff)
   \   00001F   7900         MOV     R1,#0x0
   \   000021   12....       LCALL   ??HalUARTWrite?relay
    532                //uart0_puts("hal sw1 pressed!\r\n",strlen("hal sw1 pressed!\r\n"));
    533          #endif
    534              }
    535          
    536              if ( keys & HAL_KEY_SW_2 )
   \                     ??GenericApp_HandleKeys_1:
   \   000024   EE           MOV     A,R6
   \   000025   A2E1         MOV     C,0xE0 /* A   */.1
   \   000027   5072         JNC     ??GenericApp_HandleKeys_2
    537              {
    538                //xiaoyang add
    539          #if _m_debug
    540                 HalUARTWrite(0,"hal sw2 pressed!\r\n",strlen("hal sw2 pressed!\r\n"));
   \   000029                ; Setup parameters for call to function HalUARTWrite
   \   000029   7C12         MOV     R4,#0x12
   \   00002B   7D00         MOV     R5,#0x0
   \   00002D   7A..         MOV     R2,#(`?<Constant "hal sw2 pressed!\\r\\n">` & 0xff)
   \   00002F   7B..         MOV     R3,#((`?<Constant "hal sw2 pressed!\\r\\n">` >> 8) & 0xff)
   \   000031   12....       LCALL   ?Subroutine18 & 0xFFFF
    541                //uart0_puts("hal sw2 pressed!\r\n",strlen("hal sw2 pressed!\r\n"));
    542          #endif
    543                HalLedSet ( HAL_LED_4, HAL_LED_MODE_OFF );
    544          
    545                // Initiate an End Device Bind Request for the mandatory endpoint
    546                dstAddr.addrMode = Addr16Bit;
   \                     ??CrossCallReturnLabel_64:
   \   000034   12....       LCALL   ?XSTACK_DISP0_8
   \   000037   7402         MOV     A,#0x2
   \   000039   F0           MOVX    @DPTR,A
    547                dstAddr.addr.shortAddr = 0x0000; // Coordinator
   \   00003A   85..82       MOV     DPL,?XSP + 0
   \   00003D   85..83       MOV     DPH,?XSP + 1
   \   000040   E4           CLR     A
   \   000041   F0           MOVX    @DPTR,A
   \   000042   A3           INC     DPTR
   \   000043   F0           MOVX    @DPTR,A
    548                ZDP_EndDeviceBindReq( &dstAddr, NLME_GetShortAddr(),
    549                                      GenericApp_epDesc.endPoint,
    550                                      GENERICAPP_PROFID,
    551                                      GENERICAPP_MAX_CLUSTERS, (cId_t *)GenericApp_ClusterList,
    552                                      GENERICAPP_MAX_CLUSTERS, (cId_t *)GenericApp_ClusterList,
    553                                      FALSE );
   \   000044                ; Setup parameters for call to function NLME_GetShortAddr
   \   000044   12....       LCALL   ??NLME_GetShortAddr?relay
   \   000047   8A..         MOV     ?V0 + 0,R2
   \   000049   8B..         MOV     ?V0 + 1,R3
   \   00004B   AC..         MOV     R4,?V0 + 0
   \   00004D   AD..         MOV     R5,?V0 + 1
   \   00004F                ; Setup parameters for call to function ZDP_EndDeviceBindReq
   \   00004F   75..00       MOV     ?V0 + 0,#0x0
   \   000052   78..         MOV     R0,#?V0 + 0
   \   000054   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   000057   75....       MOV     ?V0 + 0,#(GenericApp_ClusterList & 0xff)
   \   00005A   75....       MOV     ?V0 + 1,#((GenericApp_ClusterList >> 8) & 0xff)
   \   00005D   78..         MOV     R0,#?V0 + 0
   \   00005F   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000062   75..01       MOV     ?V0 + 0,#0x1
   \   000065   78..         MOV     R0,#?V0 + 0
   \   000067   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   00006A   75....       MOV     ?V0 + 0,#(GenericApp_ClusterList & 0xff)
   \   00006D   78..         MOV     R0,#?V0 + 0
   \   00006F   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000072   75..01       MOV     ?V0 + 0,#0x1
   \   000075   78..         MOV     R0,#?V0 + 0
   \   000077   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   00007A   75..04       MOV     ?V0 + 0,#0x4
   \   00007D   75..0F       MOV     ?V0 + 1,#0xf
   \   000080   78..         MOV     R0,#?V0 + 0
   \   000082   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000085   90....       MOV     DPTR,#GenericApp_epDesc
   \   000088   E0           MOVX    A,@DPTR
   \   000089   F9           MOV     R1,A
   \   00008A   7409         MOV     A,#0x9
   \   00008C   12....       LCALL   ?XSTACK_DISP0_8
   \   00008F   AA82         MOV     R2,DPL
   \   000091   AB83         MOV     R3,DPH
   \   000093   12....       LCALL   ??ZDP_EndDeviceBindReq?relay
   \   000096   7409         MOV     A,#0x9
   \   000098   12....       LCALL   ?DEALLOC_XSTACK8
    554              }
    555              
    556              //导航按键像下按
    557              if ( keys & HAL_KEY_SW_3 )
   \                     ??GenericApp_HandleKeys_2:
   \   00009B   EE           MOV     A,R6
   \   00009C   A2E4         MOV     C,0xE0 /* A   */.4
   \   00009E   500D         JNC     ??GenericApp_HandleKeys_3
    558              {
    559          #if _m_debug
    560                
    561                char buf[65]="";
                            ^
Warning[Pe177]: variable "buf" was declared but never referenced
    562                uint16 len = 0;
                              ^
Warning[Pe177]: variable "len" was declared but never referenced
    563                 HalUARTWrite(0,"hal sw3 pressed!\r\n",strlen("hal sw1 pressed!\r\n"));
   \   0000A0                ; Setup parameters for call to function HalUARTWrite
   \   0000A0   7C12         MOV     R4,#0x12
   \   0000A2   7D00         MOV     R5,#0x0
   \   0000A4   7A..         MOV     R2,#(`?<Constant "hal sw3 pressed!\\r\\n">` & 0xff)
   \   0000A6   7B..         MOV     R3,#((`?<Constant "hal sw3 pressed!\\r\\n">` >> 8) & 0xff)
   \   0000A8   7900         MOV     R1,#0x0
   \   0000AA   12....       LCALL   ??HalUARTWrite?relay
    564                //uart0_puts("[[hal sw3 pressed\n",strlen("[[hal sw3 pressed\n")+1);
    565                //len = uart0_getString (buf,64);
    566                //HalUARTRead(0,buf, 64);
    567                //buf[65] = '\0';
    568                //HalUARTWrite(0,buf,strlen(buf));
    569                
    570                //启动任务
    571                //osal_start_timerEx (data_trans_TaskID, 5, 250); //250ms后执行data_trans_process
    572          #endif
    573              }
    574          
    575              //导航按键向左按
    576              if ( keys & HAL_KEY_SW_4 )
   \                     ??GenericApp_HandleKeys_3:
   \   0000AD   EE           MOV     A,R6
   \   0000AE   A2E3         MOV     C,0xE0 /* A   */.3
   \   0000B0   5061         JNC     ??GenericApp_HandleKeys_0
    577              {
    578          #if _m_debug
    579                 HalUARTWrite(0,"hal sw4 pressed!\r\n",strlen("hal sw4 pressed!\r\n"));
   \   0000B2                ; Setup parameters for call to function HalUARTWrite
   \   0000B2   7C12         MOV     R4,#0x12
   \   0000B4   7D00         MOV     R5,#0x0
   \   0000B6   7A..         MOV     R2,#(`?<Constant "hal sw4 pressed!\\r\\n">` & 0xff)
   \   0000B8   7B..         MOV     R3,#((`?<Constant "hal sw4 pressed!\\r\\n">` >> 8) & 0xff)
   \   0000BA   12....       LCALL   ?Subroutine18 & 0xFFFF
    580               // uart0_puts("hal sw4 pressed!\n\r\n",strlen("hal sw4 pressed!\n\r\n"));
    581          #endif
    582                HalLedSet ( HAL_LED_4, HAL_LED_MODE_OFF );
    583          
    584                // Initiate a Match Description Request (Service Discovery)
    585                dstAddr.addrMode = AddrBroadcast;
   \                     ??CrossCallReturnLabel_65:
   \   0000BD   12....       LCALL   ?XSTACK_DISP0_8
   \   0000C0   740F         MOV     A,#0xf
   \   0000C2   F0           MOVX    @DPTR,A
    586                dstAddr.addr.shortAddr = NWK_BROADCAST_SHORTADDR;
   \   0000C3   85..82       MOV     DPL,?XSP + 0
   \   0000C6   85..83       MOV     DPH,?XSP + 1
   \   0000C9   74FF         MOV     A,#-0x1
   \   0000CB   F0           MOVX    @DPTR,A
   \   0000CC   A3           INC     DPTR
   \   0000CD   F0           MOVX    @DPTR,A
    587                ZDP_MatchDescReq( &dstAddr, NWK_BROADCAST_SHORTADDR,
    588                                  GENERICAPP_PROFID,
    589                                  GENERICAPP_MAX_CLUSTERS, (cId_t *)GenericApp_ClusterList,
    590                                  GENERICAPP_MAX_CLUSTERS, (cId_t *)GenericApp_ClusterList,
    591                                  FALSE );
   \   0000CE                ; Setup parameters for call to function ZDP_MatchDescReq
   \   0000CE   75..00       MOV     ?V0 + 0,#0x0
   \   0000D1   78..         MOV     R0,#?V0 + 0
   \   0000D3   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   0000D6   75....       MOV     ?V0 + 0,#(GenericApp_ClusterList & 0xff)
   \   0000D9   75....       MOV     ?V0 + 1,#((GenericApp_ClusterList >> 8) & 0xff)
   \   0000DC   78..         MOV     R0,#?V0 + 0
   \   0000DE   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0000E1   75..01       MOV     ?V0 + 0,#0x1
   \   0000E4   78..         MOV     R0,#?V0 + 0
   \   0000E6   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   0000E9   75....       MOV     ?V0 + 0,#(GenericApp_ClusterList & 0xff)
   \   0000EC   78..         MOV     R0,#?V0 + 0
   \   0000EE   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0000F1   75..04       MOV     ?V0 + 0,#0x4
   \   0000F4   75..0F       MOV     ?V0 + 1,#0xf
   \   0000F7   78..         MOV     R0,#?V0 + 0
   \   0000F9   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0000FC   7901         MOV     R1,#0x1
   \   0000FE   7CFF         MOV     R4,#-0x1
   \   000100   7DFF         MOV     R5,#-0x1
   \   000102   7408         MOV     A,#0x8
   \   000104   12....       LCALL   ?XSTACK_DISP0_8
   \   000107   AA82         MOV     R2,DPL
   \   000109   AB83         MOV     R3,DPH
   \   00010B   12....       LCALL   ??ZDP_MatchDescReq?relay
   \   00010E   7408         MOV     A,#0x8
   \   000110   12....       LCALL   ?DEALLOC_XSTACK8
    592              }
    593            }
    594          }
   \                     ??GenericApp_HandleKeys_0:
   \   000113   7409         MOV     A,#0x9
   \   000115                REQUIRE ?Subroutine35
   \   000115                ; // Fall through to label ?Subroutine35

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine18:
   \   000000   7900         MOV     R1,#0x0
   \   000002   12....       LCALL   ??HalUARTWrite?relay
   \   000005                ; Setup parameters for call to function HalLedSet
   \   000005                ; Setup parameters for call to function HalLedSet
   \   000005   7A00         MOV     R2,#0x0
   \   000007   7908         MOV     R1,#0x8
   \   000009   12....       LCALL   ??HalLedSet?relay
   \   00000C   7408         MOV     A,#0x8
   \   00000E   22           RET
    595          
    596          /*********************************************************************
    597           * LOCAL FUNCTIONS
    598           */
    599          
    600          /*********************************************************************
    601           * @fn      GenericApp_MessageMSGCB
    602           *
    603           * @brief   Data message processor callback.  This function processes
    604           *          any incoming data - probably from other devices.  So, based
    605           *          on cluster ID, perform the intended action.
    606           *
    607           * @param   none
    608           *
    609           * @return  none
    610           */
    611          /*********here i add**************/
    612          typedef struct{
    613            char temp[5];
    614            char humidity[5];
    615            char smoke[5];
    616            char co[5];
    617            char ch4[5];
    618            char address[5];
    619          }info;
    620          

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    621          info point_info[10];
   \                     point_info:
   \   000000                DS 300
   \   00012C                REQUIRE __INIT_XDATA_Z
    622          

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    623          int point_num;
   \                     point_num:
   \   000000                DS 2
   \   000002                REQUIRE __INIT_XDATA_Z
    624          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    625          void GenericApp_MessageMSGCB( afIncomingMSGPacket_t *pkt )
   \                     GenericApp_MessageMSGCB:
    626          {
   \   000000   74F4         MOV     A,#-0xc
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 12
   \   000005                ; Auto size: 4
   \   000005   74FC         MOV     A,#-0x4
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   \   00000A   8A..         MOV     ?V0 + 0,R2
   \   00000C   8B..         MOV     ?V0 + 1,R3
    627            int i;
    628            char srcadd[4];
    629            switch ( pkt->clusterId )
   \   00000E   8A82         MOV     DPL,R2
   \   000010   8B83         MOV     DPH,R3
   \   000012   A3           INC     DPTR
   \   000013   A3           INC     DPTR
   \   000014   A3           INC     DPTR
   \   000015   A3           INC     DPTR
   \   000016   E0           MOVX    A,@DPTR
   \   000017   F5..         MOV     ?V0 + 2,A
   \   000019   A3           INC     DPTR
   \   00001A   E0           MOVX    A,@DPTR
   \   00001B   F5..         MOV     ?V0 + 3,A
   \   00001D   78..         MOV     R0,#?V0 + 2
   \   00001F   12....       LCALL   ?US_SWITCH_DENSE
   \                     `?<Jumptable for GenericApp_MessageMSGCB>_0`:
   \   000022   0100         DW        1
   \   000024   00           DB        0
   \   000025   ....         DW        ??GenericApp_MessageMSGCB_0
   \   000027   ....         DW        ??GenericApp_MessageMSGCB_1
    630            {
    631              case GENERICAPP_CLUSTERID:
    632                // "the" message
    633          /*
    634          #if defined( LCD_SUPPORTED )
    635                HalLcdWriteScreen( (char*)pkt->cmd.Data, "rcvd" );
    636          #elif defined( WIN32 )
    637                WPRINTSTR( pkt->cmd.Data );
    638          #endif
    639                */
    640                //len = strlen((char *)pkt->cmd.Data);
    641                //uart0_puts((char*)pkt->cmd.Data, 37);
    642                if(pkt->cmd.Data[0] == 's')
   \                     ??GenericApp_MessageMSGCB_1:
   \   000029   EA           MOV     A,R2
   \   00002A   2415         ADD     A,#0x15
   \   00002C   12....       LCALL   ?Subroutine14 & 0xFFFF
   \                     ??CrossCallReturnLabel_30:
   \   00002F   6473         XRL     A,#0x73
   \   000031   6003         JZ      $+5
   \   000033   02....       LJMP    ??GenericApp_MessageMSGCB_0 & 0xFFFF
    643                {
    644                  srcadd[0] = pkt->cmd.Data[1];
   \   000036   EA           MOV     A,R2
   \   000037   2415         ADD     A,#0x15
   \   000039   FC           MOV     R4,A
   \   00003A   EB           MOV     A,R3
   \   00003B   3400         ADDC    A,#0x0
   \   00003D   FD           MOV     R5,A
   \   00003E   8C82         MOV     DPL,R4
   \   000040   8D83         MOV     DPH,R5
   \   000042   12....       LCALL   ??Subroutine27_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_107:
   \   000045   E0           MOVX    A,@DPTR
   \   000046   85..82       MOV     DPL,?XSP + 0
   \   000049   85..83       MOV     DPH,?XSP + 1
   \   00004C   12....       LCALL   ?Subroutine12 & 0xFFFF
    645                  srcadd[1] = pkt->cmd.Data[2];
   \                     ??CrossCallReturnLabel_24:
   \   00004F   12....       LCALL   ?Subroutine27 & 0xFFFF
   \                     ??CrossCallReturnLabel_108:
   \   000052   A3           INC     DPTR
   \   000053   E0           MOVX    A,@DPTR
   \   000054   C0E0         PUSH    A
   \   000056   7401         MOV     A,#0x1
   \   000058   12....       LCALL   ?XSTACK_DISP0_8
   \   00005B   D0E0         POP     A
   \   00005D   12....       LCALL   ?Subroutine10 & 0xFFFF
    646                  srcadd[2] = pkt->cmd.Data[3];
   \                     ??CrossCallReturnLabel_20:
   \   000060   E0           MOVX    A,@DPTR
   \   000061   C0E0         PUSH    A
   \   000063   7402         MOV     A,#0x2
   \   000065   12....       LCALL   ?XSTACK_DISP0_8
   \   000068   D0E0         POP     A
   \   00006A   12....       LCALL   ?Subroutine10 & 0xFFFF
    647                  srcadd[3] = pkt->cmd.Data[4];
   \                     ??CrossCallReturnLabel_21:
   \   00006D   A3           INC     DPTR
   \   00006E   E0           MOVX    A,@DPTR
   \   00006F   C0E0         PUSH    A
   \   000071   7403         MOV     A,#0x3
   \   000073   12....       LCALL   ?XSTACK_DISP0_8
   \   000076   D0E0         POP     A
   \   000078   F0           MOVX    @DPTR,A
    648                  //uart0_puts((char *)srcadd,4);
    649                  for(i=0;i<point_num;i++)
   \   000079   7E00         MOV     R6,#0x0
   \   00007B   7F00         MOV     R7,#0x0
   \   00007D   8008         SJMP    ??GenericApp_MessageMSGCB_2
   \                     ??GenericApp_MessageMSGCB_3:
   \   00007F   EE           MOV     A,R6
   \   000080   2401         ADD     A,#0x1
   \   000082   0E           INC     R6
   \   000083   EF           MOV     A,R7
   \   000084   3400         ADDC    A,#0x0
   \   000086   FF           MOV     R7,A
   \                     ??GenericApp_MessageMSGCB_2:
   \   000087   90....       MOV     DPTR,#point_num
   \   00008A   E0           MOVX    A,@DPTR
   \   00008B   F8           MOV     R0,A
   \   00008C   A3           INC     DPTR
   \   00008D   E0           MOVX    A,@DPTR
   \   00008E   F9           MOV     R1,A
   \   00008F   C3           CLR     C
   \   000090   EE           MOV     A,R6
   \   000091   98           SUBB    A,R0
   \   000092   EF           MOV     A,R7
   \   000093   99           SUBB    A,R1
   \   000094   A2D2         MOV     C,0xD0 /* PSW */.2
   \   000096   65D0         XRL     A,PSW
   \   000098   33           RLC     A
   \   000099   4003         JC      $+5
   \   00009B   02....       LJMP    ??GenericApp_MessageMSGCB_4 & 0xFFFF
    650                  {
    651                    //uart0_putc(i+'0');
    652                    if(strcmp(srcadd,point_info[i].address) == 0)
   \   00009E                ; Setup parameters for call to function strcmp
   \   00009E   EE           MOV     A,R6
   \   00009F   F8           MOV     R0,A
   \   0000A0   EF           MOV     A,R7
   \   0000A1   F9           MOV     R1,A
   \   0000A2   E8           MOV     A,R0
   \   0000A3   75F01E       MOV     B,#0x1e
   \   0000A6   A4           MUL     AB
   \   0000A7   F8           MOV     R0,A
   \   0000A8   AAF0         MOV     R2,B
   \   0000AA   75F01E       MOV     B,#0x1e
   \   0000AD   E9           MOV     A,R1
   \   0000AE   A4           MUL     AB
   \   0000AF   2A           ADD     A,R2
   \   0000B0   F9           MOV     R1,A
   \   0000B1   E8           MOV     A,R0
   \   0000B2   24..         ADD     A,#((point_info + 25) & 0xff)
   \   0000B4   FC           MOV     R4,A
   \   0000B5   E9           MOV     A,R1
   \   0000B6   34..         ADDC    A,#(((point_info + 25) >> 8) & 0xff)
   \   0000B8   FD           MOV     R5,A
   \   0000B9   85..82       MOV     DPL,?XSP + 0
   \   0000BC   85..83       MOV     DPH,?XSP + 1
   \   0000BF   AA82         MOV     R2,DPL
   \   0000C1   AB83         MOV     R3,DPH
   \   0000C3   12....       LCALL   ??strcmp?relay
   \   0000C6   EA           MOV     A,R2
   \   0000C7   7001         JNZ     ??GenericApp_MessageMSGCB_5
   \   0000C9   EB           MOV     A,R3
   \                     ??GenericApp_MessageMSGCB_5:
   \   0000CA   70B3         JNZ     ??GenericApp_MessageMSGCB_3
    653                    {
    654                       point_info[i].temp[0] = pkt->cmd.Data[6];
   \   0000CC   EE           MOV     A,R6
   \   0000CD   F8           MOV     R0,A
   \   0000CE   EF           MOV     A,R7
   \   0000CF   12....       LCALL   ?Subroutine17 & 0xFFFF
   \                     ??CrossCallReturnLabel_62:
   \   0000D2   FA           MOV     R2,A
   \   0000D3   E5..         MOV     A,?V0 + 1
   \   0000D5   3400         ADDC    A,#0x0
   \   0000D7   FB           MOV     R3,A
   \   0000D8   EA           MOV     A,R2
   \   0000D9   FC           MOV     R4,A
   \   0000DA   EB           MOV     A,R3
   \   0000DB   FD           MOV     R5,A
   \   0000DC   12....       LCALL   ?Subroutine0 & 0xFFFF
    655                       point_info[i].temp[1] = pkt->cmd.Data[7];
    656                       point_info[i].temp[2] = pkt->cmd.Data[8];
    657                       point_info[i].temp[3] = pkt->cmd.Data[9];
    658                       point_info[i].temp[4] = '\0';
    659                       point_info[i].humidity[0] = pkt->cmd.Data[12];
    660                       point_info[i].humidity[1] = pkt->cmd.Data[13];
    661                       point_info[i].humidity[2] = pkt->cmd.Data[14];
    662                       point_info[i].humidity[3] = pkt->cmd.Data[15];
    663                       point_info[i].humidity[4] = '\0';
    664                       point_info[i].smoke[0] = pkt->cmd.Data[18];
    665                       point_info[i].smoke[1] = pkt->cmd.Data[19];
   \                     ??CrossCallReturnLabel_0:
   \   0000DF   C0E0         PUSH    A
   \   0000E1   12....       LCALL   ?Subroutine16 & 0xFFFF
   \                     ??CrossCallReturnLabel_34:
   \   0000E4   D0E0         POP     A
   \   0000E6   12....       LCALL   ?Subroutine3 & 0xFFFF
    666                       point_info[i].smoke[2] = pkt->cmd.Data[20];
   \                     ??CrossCallReturnLabel_6:
   \   0000E9   C0E0         PUSH    A
   \   0000EB   E8           MOV     A,R0
   \   0000EC   240C         ADD     A,#0xc
   \   0000EE   12....       LCALL   ??Subroutine16_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_35:
   \   0000F1   D0E0         POP     A
   \   0000F3   12....       LCALL   ?Subroutine4 & 0xFFFF
    667                       point_info[i].smoke[3] = pkt->cmd.Data[21];
   \                     ??CrossCallReturnLabel_8:
   \   0000F6   C0E0         PUSH    A
   \   0000F8   E8           MOV     A,R0
   \   0000F9   240D         ADD     A,#0xd
   \   0000FB   12....       LCALL   ??Subroutine16_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_36:
   \   0000FE   D0E0         POP     A
   \   000100   12....       LCALL   ?Subroutine1 & 0xFFFF
    668                       point_info[i].smoke[4] = '\0';
    669                       point_info[i].co[0] = pkt->cmd.Data[24];
   \                     ??CrossCallReturnLabel_2:
   \   000103   C0E0         PUSH    A
   \   000105   E8           MOV     A,R0
   \   000106   240F         ADD     A,#0xf
   \   000108   12....       LCALL   ??Subroutine16_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_37:
   \   00010B   D0E0         POP     A
   \   00010D   12....       LCALL   ?Subroutine5 & 0xFFFF
    670                       point_info[i].co[1] = pkt->cmd.Data[25];
   \                     ??CrossCallReturnLabel_10:
   \   000110   C0E0         PUSH    A
   \   000112   E8           MOV     A,R0
   \   000113   2410         ADD     A,#0x10
   \   000115   12....       LCALL   ??Subroutine16_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_38:
   \   000118   D0E0         POP     A
   \   00011A   12....       LCALL   ?Subroutine6 & 0xFFFF
    671                       point_info[i].co[2] = pkt->cmd.Data[26];
   \                     ??CrossCallReturnLabel_12:
   \   00011D   C0E0         PUSH    A
   \   00011F   E8           MOV     A,R0
   \   000120   2411         ADD     A,#0x11
   \   000122   12....       LCALL   ??Subroutine16_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_39:
   \   000125   D0E0         POP     A
   \   000127   12....       LCALL   ?Subroutine7 & 0xFFFF
    672                       point_info[i].co[3] = pkt->cmd.Data[27];
   \                     ??CrossCallReturnLabel_14:
   \   00012A   C0E0         PUSH    A
   \   00012C   E8           MOV     A,R0
   \   00012D   2412         ADD     A,#0x12
   \   00012F   12....       LCALL   ??Subroutine16_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_40:
   \   000132   D0E0         POP     A
   \   000134   12....       LCALL   ?Subroutine2 & 0xFFFF
    673                       point_info[i].co[4] = '\0';
    674                       point_info[i].ch4[0] = pkt->cmd.Data[30];
   \                     ??CrossCallReturnLabel_4:
   \   000137   C0E0         PUSH    A
   \   000139   E8           MOV     A,R0
   \   00013A   2414         ADD     A,#0x14
   \   00013C   12....       LCALL   ??Subroutine16_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_41:
   \   00013F   D0E0         POP     A
   \   000141   12....       LCALL   ?Subroutine8 & 0xFFFF
    675                       point_info[i].ch4[1] = pkt->cmd.Data[31];
   \                     ??CrossCallReturnLabel_16:
   \   000144   C0E0         PUSH    A
   \   000146   E8           MOV     A,R0
   \   000147   2415         ADD     A,#0x15
   \   000149   12....       LCALL   ??Subroutine16_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_42:
   \   00014C   D0E0         POP     A
   \   00014E   12....       LCALL   ?Subroutine9 & 0xFFFF
    676                       point_info[i].ch4[2] = pkt->cmd.Data[32];
   \                     ??CrossCallReturnLabel_18:
   \   000151   C0E0         PUSH    A
   \   000153   E8           MOV     A,R0
   \   000154   2416         ADD     A,#0x16
   \   000156   12....       LCALL   ??Subroutine16_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_43:
   \   000159   D0E0         POP     A
   \   00015B   F0           MOVX    @DPTR,A
    677                       point_info[i].ch4[3] = pkt->cmd.Data[33];
   \   00015C   E8           MOV     A,R0
   \   00015D   2417         ADD     A,#0x17
   \   00015F   F8           MOV     R0,A
   \   000160   E9           MOV     A,R1
   \   000161   3400         ADDC    A,#0x0
   \   000163   F9           MOV     R1,A
   \   000164   8C82         MOV     DPL,R4
   \   000166   8D83         MOV     DPH,R5
   \   000168   E0           MOVX    A,@DPTR
   \   000169   12....       LCALL   ?Subroutine15 & 0xFFFF
   \                     ??CrossCallReturnLabel_31:
   \   00016C   8882         MOV     DPL,R0
   \   00016E   8983         MOV     DPH,R1
   \   000170   F0           MOVX    @DPTR,A
    678                       point_info[i].ch4[3] = '\0';
   \   000171   E4           CLR     A
   \   000172   F0           MOVX    @DPTR,A
    679                       break;
    680                    }
    681                  }
    682                  if(i == point_num)
   \                     ??GenericApp_MessageMSGCB_4:
   \   000173   90....       MOV     DPTR,#point_num
   \   000176   E0           MOVX    A,@DPTR
   \   000177   6E           XRL     A,R6
   \   000178   7003         JNZ     ??GenericApp_MessageMSGCB_6
   \   00017A   A3           INC     DPTR
   \   00017B   E0           MOVX    A,@DPTR
   \   00017C   6F           XRL     A,R7
   \                     ??GenericApp_MessageMSGCB_6:
   \   00017D   6003         JZ      $+5
   \   00017F   02....       LJMP    ??GenericApp_MessageMSGCB_0 & 0xFFFF
    683                  {
    684                    //uart0_putc(point_num+'0');
    685                    point_info[point_num].address[0] = pkt->cmd.Data[1];
   \   000182   90....       MOV     DPTR,#point_num
   \   000185   E0           MOVX    A,@DPTR
   \   000186   F8           MOV     R0,A
   \   000187   A3           INC     DPTR
   \   000188   E0           MOVX    A,@DPTR
   \   000189   12....       LCALL   ?Subroutine17 & 0xFFFF
   \                     ??CrossCallReturnLabel_63:
   \   00018C   FC           MOV     R4,A
   \   00018D   E5..         MOV     A,?V0 + 1
   \   00018F   3400         ADDC    A,#0x0
   \   000191   FD           MOV     R5,A
   \   000192   12....       LCALL   ?Subroutine26 & 0xFFFF
   \                     ??CrossCallReturnLabel_105:
   \   000195   E0           MOVX    A,@DPTR
   \   000196   C0E0         PUSH    A
   \   000198   E8           MOV     A,R0
   \   000199   2419         ADD     A,#0x19
   \   00019B   12....       LCALL   ??Subroutine16_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_44:
   \   00019E   D0E0         POP     A
   \   0001A0   12....       LCALL   ?Subroutine12 & 0xFFFF
    686                    point_info[point_num].address[1] = pkt->cmd.Data[2];
   \                     ??CrossCallReturnLabel_25:
   \   0001A3   FA           MOV     R2,A
   \   0001A4   A3           INC     DPTR
   \   0001A5   E0           MOVX    A,@DPTR
   \   0001A6   F583         MOV     DPH,A
   \   0001A8   8A82         MOV     DPL,R2
   \   0001AA   A3           INC     DPTR
   \   0001AB   A3           INC     DPTR
   \   0001AC   E0           MOVX    A,@DPTR
   \   0001AD   C0E0         PUSH    A
   \   0001AF   E8           MOV     A,R0
   \   0001B0   241A         ADD     A,#0x1a
   \   0001B2   12....       LCALL   ??Subroutine16_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_45:
   \   0001B5   D0E0         POP     A
   \   0001B7   12....       LCALL   ?Subroutine11 & 0xFFFF
    687                    point_info[point_num].address[2] = pkt->cmd.Data[3];
   \                     ??CrossCallReturnLabel_22:
   \   0001BA   E0           MOVX    A,@DPTR
   \   0001BB   C0E0         PUSH    A
   \   0001BD   E8           MOV     A,R0
   \   0001BE   241B         ADD     A,#0x1b
   \   0001C0   12....       LCALL   ??Subroutine16_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_46:
   \   0001C3   D0E0         POP     A
   \   0001C5   12....       LCALL   ?Subroutine11 & 0xFFFF
    688                    point_info[point_num].address[3] = pkt->cmd.Data[4];
   \                     ??CrossCallReturnLabel_23:
   \   0001C8   A3           INC     DPTR
   \   0001C9   E0           MOVX    A,@DPTR
   \   0001CA   C0E0         PUSH    A
   \   0001CC   E8           MOV     A,R0
   \   0001CD   241C         ADD     A,#0x1c
   \   0001CF   12....       LCALL   ??Subroutine16_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_47:
   \   0001D2   D0E0         POP     A
   \   0001D4   F0           MOVX    @DPTR,A
    689                    point_info[point_num].address[4] = '\0';
   \   0001D5   E8           MOV     A,R0
   \   0001D6   241D         ADD     A,#0x1d
   \   0001D8   12....       LCALL   ??Subroutine16_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_48:
   \   0001DB   E4           CLR     A
   \   0001DC   F0           MOVX    @DPTR,A
    690                    point_info[i].temp[0] = pkt->cmd.Data[6];
   \   0001DD   EE           MOV     A,R6
   \   0001DE   75F01E       MOV     B,#0x1e
   \   0001E1   A4           MUL     AB
   \   0001E2   FE           MOV     R6,A
   \   0001E3   AAF0         MOV     R2,B
   \   0001E5   75F01E       MOV     B,#0x1e
   \   0001E8   EF           MOV     A,R7
   \   0001E9   A4           MUL     AB
   \   0001EA   2A           ADD     A,R2
   \   0001EB   FF           MOV     R7,A
   \   0001EC   EE           MOV     A,R6
   \   0001ED   24..         ADD     A,#(point_info & 0xff)
   \   0001EF   F8           MOV     R0,A
   \   0001F0   EF           MOV     A,R7
   \   0001F1   34..         ADDC    A,#((point_info >> 8) & 0xff)
   \   0001F3   F9           MOV     R1,A
   \   0001F4   12....       LCALL   ?Subroutine0 & 0xFFFF
    691                    point_info[i].temp[1] = pkt->cmd.Data[7];
    692                    point_info[i].temp[2] = pkt->cmd.Data[8];
    693                    point_info[i].temp[3] = pkt->cmd.Data[9];
    694                    point_info[i].temp[4] = '\0';
    695                    point_info[i].humidity[0] = pkt->cmd.Data[12];
    696                       point_info[i].humidity[1] = pkt->cmd.Data[13];
    697                       point_info[i].humidity[2] = pkt->cmd.Data[14];
    698                       point_info[i].humidity[3] = pkt->cmd.Data[15];
    699                       point_info[i].humidity[4] = '\0';
    700                       point_info[i].smoke[0] = pkt->cmd.Data[18];
    701                       point_info[i].smoke[1] = pkt->cmd.Data[19];
   \                     ??CrossCallReturnLabel_1:
   \   0001F7   C0E0         PUSH    A
   \   0001F9   12....       LCALL   ?Subroutine16 & 0xFFFF
   \                     ??CrossCallReturnLabel_49:
   \   0001FC   D0E0         POP     A
   \   0001FE   12....       LCALL   ?Subroutine3 & 0xFFFF
    702                       point_info[i].smoke[2] = pkt->cmd.Data[20];
   \                     ??CrossCallReturnLabel_7:
   \   000201   C0E0         PUSH    A
   \   000203   E8           MOV     A,R0
   \   000204   240C         ADD     A,#0xc
   \   000206   12....       LCALL   ??Subroutine16_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_50:
   \   000209   D0E0         POP     A
   \   00020B   12....       LCALL   ?Subroutine4 & 0xFFFF
    703                       point_info[i].smoke[3] = pkt->cmd.Data[21];
   \                     ??CrossCallReturnLabel_9:
   \   00020E   C0E0         PUSH    A
   \   000210   E8           MOV     A,R0
   \   000211   240D         ADD     A,#0xd
   \   000213   12....       LCALL   ??Subroutine16_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_51:
   \   000216   D0E0         POP     A
   \   000218   12....       LCALL   ?Subroutine1 & 0xFFFF
    704                       point_info[i].smoke[4] = '\0';
    705                       point_info[i].co[0] = pkt->cmd.Data[24];
   \                     ??CrossCallReturnLabel_3:
   \   00021B   C0E0         PUSH    A
   \   00021D   E8           MOV     A,R0
   \   00021E   240F         ADD     A,#0xf
   \   000220   12....       LCALL   ??Subroutine16_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_52:
   \   000223   D0E0         POP     A
   \   000225   12....       LCALL   ?Subroutine5 & 0xFFFF
    706                       point_info[i].co[1] = pkt->cmd.Data[25];
   \                     ??CrossCallReturnLabel_11:
   \   000228   C0E0         PUSH    A
   \   00022A   E8           MOV     A,R0
   \   00022B   2410         ADD     A,#0x10
   \   00022D   12....       LCALL   ??Subroutine16_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_53:
   \   000230   D0E0         POP     A
   \   000232   12....       LCALL   ?Subroutine6 & 0xFFFF
    707                       point_info[i].co[2] = pkt->cmd.Data[26];
   \                     ??CrossCallReturnLabel_13:
   \   000235   C0E0         PUSH    A
   \   000237   E8           MOV     A,R0
   \   000238   2411         ADD     A,#0x11
   \   00023A   12....       LCALL   ??Subroutine16_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_54:
   \   00023D   D0E0         POP     A
   \   00023F   12....       LCALL   ?Subroutine7 & 0xFFFF
    708                       point_info[i].co[3] = pkt->cmd.Data[27];
   \                     ??CrossCallReturnLabel_15:
   \   000242   C0E0         PUSH    A
   \   000244   E8           MOV     A,R0
   \   000245   2412         ADD     A,#0x12
   \   000247   12....       LCALL   ??Subroutine16_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_55:
   \   00024A   D0E0         POP     A
   \   00024C   12....       LCALL   ?Subroutine2 & 0xFFFF
    709                       point_info[i].co[4] = '\0';
    710                       point_info[i].ch4[0] = pkt->cmd.Data[30];
   \                     ??CrossCallReturnLabel_5:
   \   00024F   C0E0         PUSH    A
   \   000251   E8           MOV     A,R0
   \   000252   2414         ADD     A,#0x14
   \   000254   12....       LCALL   ??Subroutine16_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_56:
   \   000257   D0E0         POP     A
   \   000259   12....       LCALL   ?Subroutine8 & 0xFFFF
    711                       point_info[i].ch4[1] = pkt->cmd.Data[31];
   \                     ??CrossCallReturnLabel_17:
   \   00025C   C0E0         PUSH    A
   \   00025E   E8           MOV     A,R0
   \   00025F   2415         ADD     A,#0x15
   \   000261   12....       LCALL   ??Subroutine16_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_57:
   \   000264   D0E0         POP     A
   \   000266   12....       LCALL   ?Subroutine9 & 0xFFFF
    712                       point_info[i].ch4[2] = pkt->cmd.Data[32];
   \                     ??CrossCallReturnLabel_19:
   \   000269   C0E0         PUSH    A
   \   00026B   E8           MOV     A,R0
   \   00026C   2416         ADD     A,#0x16
   \   00026E   12....       LCALL   ??Subroutine16_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_58:
   \   000271   D0E0         POP     A
   \   000273   12....       LCALL   ?Subroutine12 & 0xFFFF
    713                       point_info[i].ch4[3] = pkt->cmd.Data[33];
   \                     ??CrossCallReturnLabel_26:
   \   000276   12....       LCALL   ?Subroutine15 & 0xFFFF
   \                     ??CrossCallReturnLabel_32:
   \   000279   C0E0         PUSH    A
   \   00027B   E8           MOV     A,R0
   \   00027C   2417         ADD     A,#0x17
   \   00027E   12....       LCALL   ??Subroutine16_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_59:
   \   000281   D0E0         POP     A
   \   000283   F0           MOVX    @DPTR,A
    714                       point_info[i].ch4[4] = '\0';
   \   000284   E8           MOV     A,R0
   \   000285   2418         ADD     A,#0x18
   \   000287   12....       LCALL   ??Subroutine16_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_60:
   \   00028A   E4           CLR     A
   \   00028B   F0           MOVX    @DPTR,A
    715                       point_num++;
   \   00028C   90....       MOV     DPTR,#point_num
   \   00028F   E0           MOVX    A,@DPTR
   \   000290   2401         ADD     A,#0x1
   \   000292   F0           MOVX    @DPTR,A
   \   000293   A3           INC     DPTR
   \   000294   E0           MOVX    A,@DPTR
   \   000295   3400         ADDC    A,#0x0
   \   000297   F0           MOVX    @DPTR,A
    716                  }
    717                }
    718                else
    719                {
    720                  //uart0_puts(, 31);
    721                }
    722                break;
    723            }
    724          }
   \                     ??GenericApp_MessageMSGCB_0:
   \   000298   7404         MOV     A,#0x4
   \   00029A   12....       LCALL   ?DEALLOC_XSTACK8
   \   00029D   02....       LJMP    ?Subroutine34 & 0xFFFF

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine17:
   \   000000   F9           MOV     R1,A
   \   000001   E8           MOV     A,R0
   \   000002   75F01E       MOV     B,#0x1e
   \   000005   A4           MUL     AB
   \   000006   F8           MOV     R0,A
   \   000007   AAF0         MOV     R2,B
   \   000009   75F01E       MOV     B,#0x1e
   \   00000C   E9           MOV     A,R1
   \   00000D   A4           MUL     AB
   \   00000E   2A           ADD     A,R2
   \   00000F   F9           MOV     R1,A
   \   000010   E8           MOV     A,R0
   \   000011   24..         ADD     A,#(point_info & 0xff)
   \   000013   F8           MOV     R0,A
   \   000014   E9           MOV     A,R1
   \   000015   34..         ADDC    A,#((point_info >> 8) & 0xff)
   \   000017   F9           MOV     R1,A
   \   000018   E5..         MOV     A,?V0 + 0
   \   00001A   2415         ADD     A,#0x15
   \   00001C   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine15:
   \   000000   2421         ADD     A,#0x21
   \   000002   12....       LCALL   ?Subroutine25 & 0xFFFF
   \                     ??CrossCallReturnLabel_104:
   \   000005   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine12:
   \   000000   12....       LCALL   ??Subroutine22_4 & 0xFFFF
   \                     ??CrossCallReturnLabel_78:
   \   000003   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine11:
   \   000000   12....       LCALL   ?Subroutine21 & 0xFFFF
   \                     ??CrossCallReturnLabel_70:
   \   000003   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine21:
   \   000000   12....       LCALL   ?Subroutine29 & 0xFFFF
   \                     ??CrossCallReturnLabel_110:
   \   000003   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine29:
   \   000000   F0           MOVX    @DPTR,A
   \   000001   12....       LCALL   ?Subroutine31 & 0xFFFF
   \                     ??CrossCallReturnLabel_113:
   \   000004   A3           INC     DPTR
   \   000005   A3           INC     DPTR
   \   000006   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine10:
   \   000000   12....       LCALL   ??Subroutine22_4 & 0xFFFF
   \                     ??CrossCallReturnLabel_79:
   \   000003   12....       LCALL   ?Subroutine27 & 0xFFFF
   \                     ??CrossCallReturnLabel_109:
   \   000006   A3           INC     DPTR
   \   000007   A3           INC     DPTR
   \   000008   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine27:
   \   000000   F8           MOV     R0,A
   \                     ??Subroutine27_0:
   \   000001   A3           INC     DPTR
   \   000002   E0           MOVX    A,@DPTR
   \   000003   F583         MOV     DPH,A
   \   000005   8882         MOV     DPL,R0
   \   000007   A3           INC     DPTR
   \   000008   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine9:
   \   000000   12....       LCALL   ??Subroutine22_4 & 0xFFFF
   \                     ??CrossCallReturnLabel_80:
   \   000003   2420         ADD     A,#0x20
   \   000005   12....       LCALL   ?Subroutine25 & 0xFFFF
   \                     ??CrossCallReturnLabel_103:
   \   000008   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine8:
   \   000000   12....       LCALL   ??Subroutine22_4 & 0xFFFF
   \                     ??CrossCallReturnLabel_81:
   \   000003   241F         ADD     A,#0x1f
   \   000005   12....       LCALL   ?Subroutine25 & 0xFFFF
   \                     ??CrossCallReturnLabel_102:
   \   000008   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine7:
   \   000000   12....       LCALL   ??Subroutine22_4 & 0xFFFF
   \                     ??CrossCallReturnLabel_82:
   \   000003   241B         ADD     A,#0x1b
   \   000005   12....       LCALL   ?Subroutine25 & 0xFFFF
   \                     ??CrossCallReturnLabel_101:
   \   000008   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine6:
   \   000000   12....       LCALL   ??Subroutine22_4 & 0xFFFF
   \                     ??CrossCallReturnLabel_83:
   \   000003   241A         ADD     A,#0x1a
   \   000005   12....       LCALL   ?Subroutine25 & 0xFFFF
   \                     ??CrossCallReturnLabel_100:
   \   000008   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine5:
   \   000000   12....       LCALL   ??Subroutine22_4 & 0xFFFF
   \                     ??CrossCallReturnLabel_84:
   \   000003   2419         ADD     A,#0x19
   \   000005   12....       LCALL   ?Subroutine25 & 0xFFFF
   \                     ??CrossCallReturnLabel_99:
   \   000008   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine25:
   \   000000   12....       LCALL   ?Subroutine32 & 0xFFFF
   \                     ??CrossCallReturnLabel_114:
   \   000003   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine32:
   \   000000   FA           MOV     R2,A
   \   000001   A3           INC     DPTR
   \   000002   E0           MOVX    A,@DPTR
   \   000003   3400         ADDC    A,#0x0
   \   000005   FB           MOV     R3,A
   \   000006   8A82         MOV     DPL,R2
   \   000008   8B83         MOV     DPH,R3
   \   00000A   E0           MOVX    A,@DPTR
   \   00000B   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine22:
   \   000000   A3           INC     DPTR
   \   000001   A3           INC     DPTR
   \                     ??Subroutine22_0:
   \   000002   A3           INC     DPTR
   \                     ??Subroutine22_1:
   \   000003   A3           INC     DPTR
   \                     ??Subroutine22_2:
   \   000004   A3           INC     DPTR
   \                     ??Subroutine22_3:
   \   000005   A3           INC     DPTR
   \   000006   A3           INC     DPTR
   \   000007   A3           INC     DPTR
   \   000008   A3           INC     DPTR
   \                     ??Subroutine22_4:
   \   000009   F0           MOVX    @DPTR,A
   \   00000A   8C82         MOV     DPL,R4
   \   00000C   8D83         MOV     DPH,R5
   \   00000E   E0           MOVX    A,@DPTR
   \   00000F   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine4:
   \   000000   12....       LCALL   ??Subroutine22_4 & 0xFFFF
   \                     ??CrossCallReturnLabel_85:
   \   000003   2415         ADD     A,#0x15
   \   000005   12....       LCALL   ?Subroutine25 & 0xFFFF
   \                     ??CrossCallReturnLabel_98:
   \   000008   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine3:
   \   000000   12....       LCALL   ??Subroutine22_4 & 0xFFFF
   \                     ??CrossCallReturnLabel_86:
   \   000003   2414         ADD     A,#0x14
   \   000005   12....       LCALL   ?Subroutine25 & 0xFFFF
   \                     ??CrossCallReturnLabel_97:
   \   000008   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine2:
   \   000000   F0           MOVX    @DPTR,A
   \   000001   E8           MOV     A,R0
   \   000002   2413         ADD     A,#0x13
   \   000004   F582         MOV     DPL,A
   \   000006   E9           MOV     A,R1
   \   000007   3400         ADDC    A,#0x0
   \   000009   F583         MOV     DPH,A
   \   00000B   E4           CLR     A
   \   00000C   12....       LCALL   ??Subroutine22_4 & 0xFFFF
   \                     ??CrossCallReturnLabel_87:
   \   00000F   241E         ADD     A,#0x1e
   \   000011   12....       LCALL   ?Subroutine25 & 0xFFFF
   \                     ??CrossCallReturnLabel_96:
   \   000014   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine1:
   \   000000   F0           MOVX    @DPTR,A
   \   000001   E8           MOV     A,R0
   \   000002   240E         ADD     A,#0xe
   \   000004   F582         MOV     DPL,A
   \   000006   E9           MOV     A,R1
   \   000007   3400         ADDC    A,#0x0
   \   000009   F583         MOV     DPH,A
   \   00000B   E4           CLR     A
   \   00000C   12....       LCALL   ??Subroutine22_4 & 0xFFFF
   \                     ??CrossCallReturnLabel_88:
   \   00000F   2418         ADD     A,#0x18
   \   000011   12....       LCALL   ?Subroutine25 & 0xFFFF
   \                     ??CrossCallReturnLabel_95:
   \   000014   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine0:
   \   000000   12....       LCALL   ?Subroutine26 & 0xFFFF
   \                     ??CrossCallReturnLabel_106:
   \   000003   A3           INC     DPTR
   \   000004   12....       LCALL   ?Subroutine28 & 0xFFFF
   \                     ??CrossCallReturnLabel_116:
   \   000007   12....       LCALL   ?Subroutine21 & 0xFFFF
   \                     ??CrossCallReturnLabel_71:
   \   00000A   12....       LCALL   ?Subroutine28 & 0xFFFF
   \                     ??CrossCallReturnLabel_117:
   \   00000D   12....       LCALL   ?Subroutine20 & 0xFFFF
   \                     ??CrossCallReturnLabel_68:
   \   000010   12....       LCALL   ??Subroutine28_1 & 0xFFFF
   \                     ??CrossCallReturnLabel_118:
   \   000013   A3           INC     DPTR
   \   000014   12....       LCALL   ?Subroutine20 & 0xFFFF
   \                     ??CrossCallReturnLabel_69:
   \   000017   12....       LCALL   ??Subroutine28_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_119:
   \   00001A   A3           INC     DPTR
   \   00001B   A3           INC     DPTR
   \   00001C   A3           INC     DPTR
   \   00001D   F0           MOVX    @DPTR,A
   \   00001E   E4           CLR     A
   \   00001F   8882         MOV     DPL,R0
   \   000021   8983         MOV     DPH,R1
   \   000023   12....       LCALL   ??Subroutine22_3 & 0xFFFF
   \                     ??CrossCallReturnLabel_77:
   \   000026   240C         ADD     A,#0xc
   \   000028   12....       LCALL   ?Subroutine24 & 0xFFFF
   \                     ??CrossCallReturnLabel_91:
   \   00002B   12....       LCALL   ??Subroutine22_2 & 0xFFFF
   \                     ??CrossCallReturnLabel_76:
   \   00002E   240D         ADD     A,#0xd
   \   000030   12....       LCALL   ?Subroutine24 & 0xFFFF
   \                     ??CrossCallReturnLabel_92:
   \   000033   12....       LCALL   ??Subroutine22_1 & 0xFFFF
   \                     ??CrossCallReturnLabel_75:
   \   000036   240E         ADD     A,#0xe
   \   000038   12....       LCALL   ?Subroutine24 & 0xFFFF
   \                     ??CrossCallReturnLabel_93:
   \   00003B   12....       LCALL   ??Subroutine22_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_74:
   \   00003E   240F         ADD     A,#0xf
   \   000040   12....       LCALL   ?Subroutine23 & 0xFFFF
   \                     ??CrossCallReturnLabel_89:
   \   000043   A3           INC     DPTR
   \   000044   A3           INC     DPTR
   \   000045   A3           INC     DPTR
   \   000046   A3           INC     DPTR
   \   000047   A3           INC     DPTR
   \   000048   A3           INC     DPTR
   \   000049   A3           INC     DPTR
   \   00004A   F0           MOVX    @DPTR,A
   \   00004B   E4           CLR     A
   \   00004C   8882         MOV     DPL,R0
   \   00004E   8983         MOV     DPH,R1
   \   000050   12....       LCALL   ?Subroutine22 & 0xFFFF
   \                     ??CrossCallReturnLabel_72:
   \   000053   2412         ADD     A,#0x12
   \   000055   12....       LCALL   ?Subroutine23 & 0xFFFF
   \                     ??CrossCallReturnLabel_90:
   \   000058   12....       LCALL   ?Subroutine22 & 0xFFFF
   \                     ??CrossCallReturnLabel_73:
   \   00005B   2413         ADD     A,#0x13
   \   00005D   12....       LCALL   ?Subroutine25 & 0xFFFF
   \                     ??CrossCallReturnLabel_94:
   \   000060   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine28:
   \   000000   A3           INC     DPTR
   \   000001   A3           INC     DPTR
   \   000002   A3           INC     DPTR
   \                     ??Subroutine28_0:
   \   000003   A3           INC     DPTR
   \                     ??Subroutine28_1:
   \   000004   E0           MOVX    A,@DPTR
   \   000005                REQUIRE ?Subroutine36
   \   000005                ; // Fall through to label ?Subroutine36

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine36:
   \   000000   8882         MOV     DPL,R0
   \   000002   8983         MOV     DPH,R1
   \   000004   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine26:
   \   000000   12....       LCALL   ?Subroutine31 & 0xFFFF
   \                     ??CrossCallReturnLabel_112:
   \   000003   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine31:
   \   000000   8C82         MOV     DPL,R4
   \   000002   8D83         MOV     DPH,R5
   \   000004   E0           MOVX    A,@DPTR
   \   000005   FA           MOV     R2,A
   \   000006   A3           INC     DPTR
   \   000007   E0           MOVX    A,@DPTR
   \   000008   F583         MOV     DPH,A
   \   00000A   8A82         MOV     DPL,R2
   \   00000C   A3           INC     DPTR
   \   00000D   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine24:
   \   000000   12....       LCALL   ?Subroutine30 & 0xFFFF
   \                     ??CrossCallReturnLabel_121:
   \   000003   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine30:
   \   000000   12....       LCALL   ?Subroutine32 & 0xFFFF
   \                     ??CrossCallReturnLabel_115:
   \   000003   80..         SJMP    ?Subroutine36

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine23:
   \   000000   12....       LCALL   ?Subroutine30 & 0xFFFF
   \                     ??CrossCallReturnLabel_120:
   \   000003   A3           INC     DPTR
   \   000004   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine20:
   \   000000   A3           INC     DPTR
   \   000001   12....       LCALL   ?Subroutine29 & 0xFFFF
   \                     ??CrossCallReturnLabel_111:
   \   000004   A3           INC     DPTR
   \   000005   A3           INC     DPTR
   \   000006   A3           INC     DPTR
   \   000007   A3           INC     DPTR
   \   000008   A3           INC     DPTR
   \   000009   22           RET
    725          
    726          /*********************************************************************
    727           * @fn      GenericApp_SendTheMessage
    728           *
    729           * @brief   Send "the" message.
    730           *
    731           * @param   none
    732           *
    733           * @return  none
    734           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    735          void GenericApp_SendTheMessage( void )
   \                     GenericApp_SendTheMessage:
    736          {
   \   000000   74F6         MOV     A,#-0xa
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 10
   \   000005                ; Auto size: 12
   \   000005   74F4         MOV     A,#-0xc
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
    737            char theMessageData[] = "Hello World";
   \   00000A   85..82       MOV     DPL,?XSP + 0
   \   00000D   85..83       MOV     DPH,?XSP + 1
   \   000010   AC82         MOV     R4,DPL
   \   000012   AD83         MOV     R5,DPH
   \   000014   7583..       MOV     DPH,#((`?<Constant "Hello World">` >> 8) & 0xff)
   \   000017   7582..       MOV     DPL,#(`?<Constant "Hello World">` & 0xff)
   \   00001A   740C         MOV     A,#0xc
   \   00001C   12....       LCALL   ?MOVE_LONG8_XDATA_XDATA
    738          
    739            if ( AF_DataRequest( &GenericApp_DstAddr, &GenericApp_epDesc,
    740                                 GENERICAPP_CLUSTERID,
    741                                 (byte)osal_strlen( theMessageData ) + 1,
    742                                 (byte *)&theMessageData,
    743                                 &GenericApp_TransID,
    744                                 AF_DISCV_ROUTE, AF_DEFAULT_RADIUS ) == afStatus_SUCCESS )
   \   00001F                ; Setup parameters for call to function AF_DataRequest
   \   00001F   75..0A       MOV     ?V0 + 0,#0xa
   \   000022   78..         MOV     R0,#?V0 + 0
   \   000024   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   000027   75....       MOV     ?V0 + 0,#(GenericApp_TransID & 0xff)
   \   00002A   75....       MOV     ?V0 + 1,#((GenericApp_TransID >> 8) & 0xff)
   \   00002D   78..         MOV     R0,#?V0 + 0
   \   00002F   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000032   7403         MOV     A,#0x3
   \   000034   12....       LCALL   ?XSTACK_DISP0_8
   \   000037   8582..       MOV     ?V0 + 0,DPL
   \   00003A   8583..       MOV     ?V0 + 1,DPH
   \   00003D   78..         MOV     R0,#?V0 + 0
   \   00003F   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000042                ; Setup parameters for call to function osal_strlen
   \   000042   7405         MOV     A,#0x5
   \   000044   12....       LCALL   ?XSTACK_DISP0_8
   \   000047   AA82         MOV     R2,DPL
   \   000049   AB83         MOV     R3,DPH
   \   00004B   12....       LCALL   ??osal_strlen?relay
   \   00004E   EA           MOV     A,R2
   \   00004F   F8           MOV     R0,A
   \   000050   7401         MOV     A,#0x1
   \   000052   28           ADD     A,R0
   \   000053   F5..         MOV     ?V0 + 0,A
   \   000055   E4           CLR     A
   \   000056   3400         ADDC    A,#0x0
   \   000058   F5..         MOV     ?V0 + 1,A
   \   00005A   78..         MOV     R0,#?V0 + 0
   \   00005C   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00005F   75..01       MOV     ?V0 + 0,#0x1
   \   000062   75..00       MOV     ?V0 + 1,#0x0
   \   000065   78..         MOV     R0,#?V0 + 0
   \   000067   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00006A   7920         MOV     R1,#0x20
   \   00006C   7C..         MOV     R4,#(GenericApp_epDesc & 0xff)
   \   00006E   7D..         MOV     R5,#((GenericApp_epDesc >> 8) & 0xff)
   \   000070   7A..         MOV     R2,#(GenericApp_DstAddr & 0xff)
   \   000072   7B..         MOV     R3,#((GenericApp_DstAddr >> 8) & 0xff)
   \   000074   12....       LCALL   ??AF_DataRequest?relay
   \   000077   7409         MOV     A,#0x9
   \   000079   12....       LCALL   ?DEALLOC_XSTACK8
    745            {
    746              // Successfully requested to be sent.
    747            }
    748            else
    749            {
    750              // Error occurred in request to send.
    751            }
    752          }
   \   00007C   740C         MOV     A,#0xc
   \   00007E   02....       LJMP    ?Subroutine35 & 0xFFFF
    753          
    754          /*********************************************************************
    755          *********************************************************************/
    756          /*********************************************************************
    757           * TYPEDEFS
    758           */
    759          #ifndef UART0_GET_STR
    760          #define UART0_GET_STR   1
    761          typedef struct
    762          {
    763            uint8 *rxBuf;
    764            uint8 rxHead;
    765            uint8 rxTail;
    766            uint8 rxMax;
    767            uint8 rxCnt;
    768            uint8 rxTick;
    769            uint8 rxHigh;
    770          
    771            uint8 *txBuf;
    772          #if HAL_UART_BIG_TX_BUF
    773            uint16 txHead;
    774            uint16 txTail;
    775            uint16 txMax;
    776            uint16 txCnt;
    777          #else
    778            uint8 txHead;
    779            uint8 txTail;
    780            uint8 txMax;
    781            uint8 txCnt;
    782          #endif
    783            uint8 txTick;
    784          
    785            uint8 flag;
    786          
    787            halUARTCBack_t rxCB;
    788          } uartCfg_t;
    789          
    790          #if ( HAL_UART_DEBUG )
    791            #define HAL_UART_ASSERT( expr)        HAL_ASSERT( expr )
    792          #else
    793            #define HAL_UART_ASSERT( expr )
    794          #endif
    795          
    796          #define UART_CFG_U1F  0x80  // USART1 flag bit.
    797          #define UART_CFG_DMA  0x40  // Port is using DMA.
    798          #define UART_CFG_FLW  0x20  // Port is using flow control.
    799          #define UART_CFG_SP4  0x10
    800          #define UART_CFG_SP3  0x08
    801          #define UART_CFG_SP2  0x04
    802          #define UART_CFG_RXF  0x02  // Rx flow is disabled.
    803          #define UART_CFG_TXF  0x01  // Tx is in process.
    804          
    805          extern uartCfg_t *cfg0;
    806          /*xiaoyang added*/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    807          uint16 uart0_getString(char* buf,uint16 max_len)
   \                     uart0_getString:
    808          {
   \   000000   74F3         MOV     A,#-0xd
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 13
   \   000005                ; Auto size: 0
   \   000005   EC           MOV     A,R4
   \   000006   FE           MOV     R6,A
   \   000007   ED           MOV     A,R5
   \   000008   FF           MOV     R7,A
    809            //uint16 HalUARTRead( uint8 port, uint8 *buf, uint16 len );
    810            uartCfg_t *cfg = NULL;
    811            uint16 cnt = 0;
   \   000009   7800         MOV     R0,#0x0
   \   00000B   7900         MOV     R1,#0x0
    812          
    813            cfg = cfg0;
   \   00000D   90....       MOV     DPTR,#cfg0
   \   000010   E0           MOVX    A,@DPTR
   \   000011   FC           MOV     R4,A
   \   000012   A3           INC     DPTR
   \   000013   E0           MOVX    A,@DPTR
   \   000014   FD           MOV     R5,A
   \   000015   800D         SJMP    ??uart0_getString_0
    814            HAL_UART_ASSERT( cfg );
    815            while ( (cfg->rxTail != cfg->rxHead) &&(cnt < max_len) )
    816            {
    817              *buf = cfg->rxBuf[cfg->rxTail];
    818              if ( cfg->rxTail == cfg->rxMax )
    819              {
    820                cfg->rxTail = 0;
    821              }
    822              else
    823              {
    824                cfg->rxTail++;
    825              }
    826              //xiaoyang add
    827              if(*buf == '\0'){
    828                  buf++;
    829                  *buf ='\0' ;
    830                  return cnt;
    831              }
    832              buf++;
   \                     ??uart0_getString_1:
   \   000017   A3           INC     DPTR
   \   000018   AA82         MOV     R2,DPL
   \   00001A   AB83         MOV     R3,DPH
    833              cnt++;
   \   00001C   E8           MOV     A,R0
   \   00001D   2401         ADD     A,#0x1
   \   00001F   08           INC     R0
   \   000020   E9           MOV     A,R1
   \   000021   3400         ADDC    A,#0x0
   \   000023   F9           MOV     R1,A
   \                     ??uart0_getString_0:
   \   000024   8C82         MOV     DPL,R4
   \   000026   8D83         MOV     DPH,R5
   \   000028   A3           INC     DPTR
   \   000029   A3           INC     DPTR
   \   00002A   A3           INC     DPTR
   \   00002B   12....       LCALL   ?Subroutine13 & 0xFFFF
   \                     ??CrossCallReturnLabel_27:
   \   00002E   E0           MOVX    A,@DPTR
   \   00002F   65..         XRL     A,?V0 + 0
   \   000031   6060         JZ      ??uart0_getString_2
   \   000033   C3           CLR     C
   \   000034   E8           MOV     A,R0
   \   000035   9E           SUBB    A,R6
   \   000036   E9           MOV     A,R1
   \   000037   9F           SUBB    A,R7
   \   000038   5059         JNC     ??uart0_getString_2
   \   00003A   EC           MOV     A,R4
   \   00003B   2403         ADD     A,#0x3
   \   00003D   F5..         MOV     ?V0 + 0,A
   \   00003F   ED           MOV     A,R5
   \   000040   3400         ADDC    A,#0x0
   \   000042   F5..         MOV     ?V0 + 1,A
   \   000044   85..82       MOV     DPL,?V0 + 0
   \   000047   F583         MOV     DPH,A
   \   000049   E0           MOVX    A,@DPTR
   \   00004A   F5..         MOV     ?V0 + 2,A
   \   00004C   8C82         MOV     DPL,R4
   \   00004E   8D83         MOV     DPH,R5
   \   000050   E0           MOVX    A,@DPTR
   \   000051   25..         ADD     A,?V0 + 2
   \   000053   F5..         MOV     ?V0 + 4,A
   \   000055   A3           INC     DPTR
   \   000056   E0           MOVX    A,@DPTR
   \   000057   3400         ADDC    A,#0x0
   \   000059   85..82       MOV     DPL,?V0 + 4
   \   00005C   F583         MOV     DPH,A
   \   00005E   E0           MOVX    A,@DPTR
   \   00005F   8A82         MOV     DPL,R2
   \   000061   8B83         MOV     DPH,R3
   \   000063   F0           MOVX    @DPTR,A
   \   000064   85..82       MOV     DPL,?V0 + 0
   \   000067   85..83       MOV     DPH,?V0 + 1
   \   00006A   12....       LCALL   ?Subroutine13 & 0xFFFF
   \                     ??CrossCallReturnLabel_28:
   \   00006D   A3           INC     DPTR
   \   00006E   A3           INC     DPTR
   \   00006F   E0           MOVX    A,@DPTR
   \   000070   65..         XRL     A,?V0 + 0
   \   000072   700A         JNZ     ??uart0_getString_3
   \   000074   E4           CLR     A
   \   000075   8C82         MOV     DPL,R4
   \   000077   8D83         MOV     DPH,R5
   \   000079   A3           INC     DPTR
   \   00007A   A3           INC     DPTR
   \   00007B   A3           INC     DPTR
   \   00007C   8009         SJMP    ??uart0_getString_4
   \                     ??uart0_getString_3:
   \   00007E   8C82         MOV     DPL,R4
   \   000080   8D83         MOV     DPH,R5
   \   000082   A3           INC     DPTR
   \   000083   A3           INC     DPTR
   \   000084   A3           INC     DPTR
   \   000085   E0           MOVX    A,@DPTR
   \   000086   04           INC     A
   \                     ??uart0_getString_4:
   \   000087   F0           MOVX    @DPTR,A
   \   000088   8A82         MOV     DPL,R2
   \   00008A   8B83         MOV     DPH,R3
   \   00008C   E0           MOVX    A,@DPTR
   \   00008D   7088         JNZ     ??uart0_getString_1
   \   00008F   E4           CLR     A
   \   000090   A3           INC     DPTR
   \   000091   8010         SJMP    ??uart0_getString_5
    834            }
    835          
    836          #if HAL_UART_DMA
    837            #if HAL_UART_ISR
    838            if ( cfg->flag & UART_CFG_DMA )
    839            #endif
    840            {
    841              /* If there is no flow control on a DMA-driven UART, the Rx Head & Tail
    842               * pointers must be reset to zero after every read in order to preserve the
    843               * full length of the Rx buffer. This implies that every Read must read all
    844               * of the Rx bytes available, or the pointers will not be reset and the
    845               * next incoming packet may not fit in the Rx buffer space remaining - thus
    846               * the end portion of the incoming packet that does not fit would be lost.
    847               */
    848              if ( !(cfg->flag & UART_CFG_FLW) )
   \                     ??uart0_getString_2:
   \   000093   EC           MOV     A,R4
   \   000094   240F         ADD     A,#0xf
   \   000096   F582         MOV     DPL,A
   \   000098   ED           MOV     A,R5
   \   000099   12....       LCALL   ??Subroutine16_1 & 0xFFFF
   \                     ??CrossCallReturnLabel_61:
   \   00009C   E0           MOVX    A,@DPTR
   \   00009D   A2E5         MOV     C,0xE0 /* A   */.5
   \   00009F   4003         JC      ??uart0_getString_6
    849              {
    850                // This is a trick to trigger the DMA abort and restart logic in pollDMA.
    851                cfg->flag |= UART_CFG_RXF;
   \   0000A1   D2E1         SETB    0xE0 /* A   */.1
   \                     ??uart0_getString_5:
   \   0000A3   F0           MOVX    @DPTR,A
    852              }
    853            }
    854          #endif
    855          
    856            return cnt;
   \                     ??uart0_getString_6:
   \   0000A4   E8           MOV     A,R0
   \   0000A5   FA           MOV     R2,A
   \   0000A6   E9           MOV     A,R1
   \   0000A7   FB           MOV     R3,A
   \   0000A8                REQUIRE ?Subroutine37
   \   0000A8                ; // Fall through to label ?Subroutine37
    857          }

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine37:
   \   000000   7F05         MOV     R7,#0x5
   \   000002   02....       LJMP    ?BANKED_LEAVE_XDATA

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine13:
   \   000000   E0           MOVX    A,@DPTR
   \   000001   F5..         MOV     ?V0 + 0,A
   \   000003   8C82         MOV     DPL,R4
   \   000005   8D83         MOV     DPH,R5
   \   000007   A3           INC     DPTR
   \   000008   A3           INC     DPTR
   \   000009   22           RET
    858          #endif
    859          
    860          //------------------------------------------------------------------------------
    861          //xiaoyang add, data_trans task
    862          //------------------------------------------------------------------------------

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    863          void data_trans_Init( uint8 task_id ) //任务初始化函数
   \                     data_trans_Init:
    864          {
   \   000000   C082         PUSH    DPL
   \   000002   C083         PUSH    DPH
   \   000004                ; Saved register size: 2
   \   000004                ; Auto size: 0
    865              data_trans_TaskID = task_id;//用data_trans_TaskID全局变量记住自己的任务号，
   \   000004   E9           MOV     A,R1
   \   000005   90....       MOV     DPTR,#data_trans_TaskID
   \   000008   F0           MOVX    @DPTR,A
    866              SPIMgr_RegisterTaskID( task_id );//注册该任务为串口任务，其实就是App_TaskID = data_trans_TaskID;
   \   000009                ; Setup parameters for call to function SPIMgr_RegisterTaskID
   \   000009   12....       LCALL   ??SPIMgr_RegisterTaskID?relay
    867          }
   \   00000C   80..         SJMP    ?Subroutine33
    868          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    869          uint16 data_trans_process( uint8 task_id, uint16 events ) //任务处理函数
   \                     data_trans_process:
    870          {
   \   000000   C082         PUSH    DPL
   \   000002   C083         PUSH    DPH
   \   000004                ; Saved register size: 2
   \   000004                ; Auto size: 33
   \   000004   74DF         MOV     A,#-0x21
   \   000006   12....       LCALL   ?ALLOC_XSTACK8
    871            int i,len;
    872            char buf[33]="";
   \   000009   85..82       MOV     DPL,?XSP + 0
   \   00000C   85..83       MOV     DPH,?XSP + 1
   \   00000F   AC82         MOV     R4,DPL
   \   000011   AD83         MOV     R5,DPH
   \   000013   7583..       MOV     DPH,#((`?<Constant "">` >> 8) & 0xff)
   \   000016   7582..       MOV     DPL,#(`?<Constant "">` & 0xff)
   \   000019   7421         MOV     A,#0x21
   \   00001B   12....       LCALL   ?MOVE_LONG8_XDATA_XDATA
    873            char srcaddr[5];
    874            char send_info[40];
    875            //在串口调试助手中你发什么就收到什么
    876            HalUARTRead(SPI_MGR_DEFAULT_PORT,buf,32 );//读串口数据到buf
                                                    ^
Warning[Pe167]: argument of type "char *" is incompatible with parameter of
          type "uint8 *"
   \   00001E                ; Setup parameters for call to function HalUARTRead
   \   00001E   7C20         MOV     R4,#0x20
   \   000020   FD           MOV     R5,A
   \   000021   85..82       MOV     DPL,?XSP + 0
   \   000024   85..83       MOV     DPH,?XSP + 1
   \   000027   AA82         MOV     R2,DPL
   \   000029   AB83         MOV     R3,DPH
   \   00002B   F9           MOV     R1,A
   \   00002C   12....       LCALL   ??HalUARTRead?relay
    877            len = strlen(buf);
   \   00002F                ; Setup parameters for call to function strlen
   \   00002F   85..82       MOV     DPL,?XSP + 0
   \   000032   85..83       MOV     DPH,?XSP + 1
   \   000035   AA82         MOV     R2,DPL
   \   000037   AB83         MOV     R3,DPH
   \   000039   12....       LCALL   ??strlen?relay
    878            HalUARTWrite(0,buf,strlen(buf));
                                  ^
Warning[Pe167]: argument of type "char *" is incompatible with parameter of
          type "uint8 *"

    int i,len;
        ^
"E:\嵌入式开发\hit-wsn\src\hit_wsn_2.1\hit_wsn_2.1\CC2430\Projects\zstack\Samples\Coordinator\Source\GenericApp.c",871  Warning[Pe177]: 
          variable "i" was declared but never referenced

    char srcaddr[5];
         ^
"E:\嵌入式开发\hit-wsn\src\hit_wsn_2.1\hit_wsn_2.1\CC2430\Projects\zstack\Samples\Coordinator\Source\GenericApp.c",873  Warning[Pe177]: 
          variable "srcaddr" was declared but never referenced

    char send_info[40];
         ^
"E:\嵌入式开发\hit-wsn\src\hit_wsn_2.1\hit_wsn_2.1\CC2430\Projects\zstack\Samples\Coordinator\Source\GenericApp.c",874  Warning[Pe177]: 
          variable "send_info" was declared but never referenced
   \   00003C                ; Setup parameters for call to function HalUARTWrite
   \   00003C                ; Setup parameters for call to function strlen
   \   00003C   85..82       MOV     DPL,?XSP + 0
   \   00003F   85..83       MOV     DPH,?XSP + 1
   \   000042   AA82         MOV     R2,DPL
   \   000044   AB83         MOV     R3,DPH
   \   000046   12....       LCALL   ??strlen?relay
   \   000049   EA           MOV     A,R2
   \   00004A   FC           MOV     R4,A
   \   00004B   EB           MOV     A,R3
   \   00004C   FD           MOV     R5,A
   \   00004D   85..82       MOV     DPL,?XSP + 0
   \   000050   85..83       MOV     DPH,?XSP + 1
   \   000053   AA82         MOV     R2,DPL
   \   000055   AB83         MOV     R3,DPH
   \   000057   7900         MOV     R1,#0x0
   \   000059   12....       LCALL   ??HalUARTWrite?relay
    879            //uart0_puts(buf,strlen(buf));
    880            /*
    881            if(len >= 10)
    882            {
    883              //uart0_puts("len>10",6);
    884              if(buf[0] == '[' && buf[1] == '[' && buf[2] == 'R' && buf[3] == 'D' && buf[4] == '#')
    885              {
    886                srcaddr[0] = buf[5];
    887                srcaddr[1] = buf[6];
    888                srcaddr[2] = buf[7];
    889                srcaddr[3] = buf[8];
    890                srcaddr[4] = '\0';
    891                for(i=0;i<point_num;i++)
    892                {
    893                  if(strcmp(srcaddr,point_info[i].address)==0)
    894                  {
    895                    sprintf(send_info,"#%s:%s:%s:%s:%s#",point_info[i].temp,point_info[i].humidity,point_info[i].smoke,point_info[i].co,point_info[i].ch4);
    896                    //send_info[27] = '\0';
    897                    //uart0_puts(send_info,28);
    898                    HalUARTWrite(0,send_info,strlen(send_info));
    899                  }
    900                }
    901                //uart0_puts("]]",2);
    902                HalUARTWrite(0,"]]",strlen("]]"));
    903              }
    904            }
    905            else if(len >= 4)
    906            {
    907              if(strcmp(buf,"[[RA")==0)
    908              {
    909                for(i=0;i<point_num;i++)
    910                {
    911                  sprintf(send_info,"#%s#",point_info[i].address);
    912                  //send_info[6] = '\0';
    913                  //uart0_puts(send_info,7);
    914                  HalUARTWrite(0,send_info,strlen(send_info));
    915                }
    916                HalUARTWrite(0,"]]",strlen("]]"));
    917                //uart0_puts("]]",2);
    918              }
    919            }
    920           */
    921          #if defined(ZAPP_P1)
    922            SPIMgr_AppFlowControl(SPI_MGR_ZAPP_RX_READY);//恢复流，不然不能接收新数据
    923          #endif
    924            return 0;   
   \   00005C   7A00         MOV     R2,#0x0
   \   00005E   7B00         MOV     R3,#0x0
   \   000060   7421         MOV     A,#0x21
   \   000062   12....       LCALL   ?DEALLOC_XSTACK8
   \   000065                REQUIRE ?Subroutine33
   \   000065                ; // Fall through to label ?Subroutine33
    925          }
    926          
    927          //------------------------------------------------------------------------------
    928          // xiaoyang add @2011-5-25
    929          //------------------------------------------------------------------------------
    930          
    931          /******************************************************************************
    932           * CONSTANTS
    933           */
    934          //BUFFER buffer;
    935          
    936          /******************************************************************************
    937          * @fn  initUART
    938          *
    939          * @brief
    940          *      Initializes components for the UART application example.
    941          *
    942          * Parameters:
    943          *
    944          * @param  void
    945          *
    946          * @return void
    947          *
    948          ******************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    949          void UART_SETUP(char uart,int baudRate,char options)  
   \                     UART_SETUP:
    950          {
   \   000000   74F4         MOV     A,#-0xc
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 12
   \   000005                ; Auto size: 0
    951              if ((options) & FLOW_CONTROL_ENABLE){      
   \   000005   EC           MOV     A,R4
   \   000006   A2E6         MOV     C,0xE0 /* A   */.6
   \   000008   E5F1         MOV     A,0xf1
   \   00000A   5010         JNC     ??UART_SETUP_0
    952                  if(PERCFG & 0x01){ /* Alt 2        */
   \   00000C   A2E0         MOV     C,0xE0 /* A   */.0
   \   00000E   5007         JNC     ??UART_SETUP_1
    953                     P1SEL |= 0x3C;                    
   \   000010   43F43C       ORL     0xf4,#0x3c
   \                     ??UART_SETUP_2:
   \   000013   E5F4         MOV     A,0xf4
   \   000015   8013         SJMP    ??UART_SETUP_3
    954                  } else {           /* Alt 1        */
    955                     P0SEL |= 0x3C;                    
   \                     ??UART_SETUP_1:
   \   000017   43F33C       ORL     0xf3,#0x3c
   \   00001A   800C         SJMP    ??UART_SETUP_4
    956                  }                                                                         
    957              }                                          
    958              else{                    
    959                  if(PERCFG & 0x01){ /* Alt 2        */
   \                     ??UART_SETUP_0:
   \   00001C   A2E0         MOV     C,0xE0 /* A   */.0
   \   00001E   5005         JNC     ??UART_SETUP_5
    960                     P1SEL |= 0x30;                    
   \   000020   43F430       ORL     0xf4,#0x30
   \   000023   80EE         SJMP    ??UART_SETUP_2
    961                  } else {           /* Alt 1        */
    962                     P0SEL |= 0x0C;                    
   \                     ??UART_SETUP_5:
   \   000025   43F30C       ORL     0xf3,#0xc
   \                     ??UART_SETUP_4:
   \   000028   E5F3         MOV     A,0xf3
    963                  }                                                                                                    
    964              }   
    965              
    966              U0GCR = BAUD_E((baudRate), CLKSPD);
                             ^
Warning[Pa084]: pointless integer comparison with an out of range value

      U0GCR = BAUD_E((baudRate), CLKSPD);
              ^
"E:\嵌入式开发\hit-wsn\src\hit_wsn_2.1\hit_wsn_2.1\CC2430\Projects\zstack\Samples\Coordinator\Source\GenericApp.c",966  Warning[Pa084]: 
          pointless integer comparison with an out of range value

      U0GCR = BAUD_E((baudRate), CLKSPD);
              ^
"E:\嵌入式开发\hit-wsn\src\hit_wsn_2.1\hit_wsn_2.1\CC2430\Projects\zstack\Samples\Coordinator\Source\GenericApp.c",966  Warning[Pa084]: 
          pointless integer comparison with an out of range value

      U0GCR = BAUD_E((baudRate), CLKSPD);
              ^
"E:\嵌入式开发\hit-wsn\src\hit_wsn_2.1\hit_wsn_2.1\CC2430\Projects\zstack\Samples\Coordinator\Source\GenericApp.c",966  Warning[Pa084]: 
          pointless integer comparison with an out of range value

      U0GCR = BAUD_E((baudRate), CLKSPD);
              ^
"E:\嵌入式开发\hit-wsn\src\hit_wsn_2.1\hit_wsn_2.1\CC2430\Projects\zstack\Samples\Coordinator\Source\GenericApp.c",966  Warning[Pa084]: 
          pointless integer comparison with an out of range value

      U0GCR = BAUD_E((baudRate), CLKSPD);
              ^
"E:\嵌入式开发\hit-wsn\src\hit_wsn_2.1\hit_wsn_2.1\CC2430\Projects\zstack\Samples\Coordinator\Source\GenericApp.c",966  Warning[Pa084]: 
          pointless integer comparison with an out of range value

      U0GCR = BAUD_E((baudRate), CLKSPD);
              ^
"E:\嵌入式开发\hit-wsn\src\hit_wsn_2.1\hit_wsn_2.1\CC2430\Projects\zstack\Samples\Coordinator\Source\GenericApp.c",966  Warning[Pa084]: 
          pointless integer comparison with an out of range value
   \                     ??UART_SETUP_3:
   \   00002A   7460         MOV     A,#0x60
   \   00002C   6A           XRL     A,R2
   \   00002D   7003         JNZ     ??UART_SETUP_6
   \   00002F   7409         MOV     A,#0x9
   \   000031   6B           XRL     A,R3
   \                     ??UART_SETUP_6:
   \   000032   700C         JNZ     ??UART_SETUP_7
   \   000034   E5C6         MOV     A,0xc6
   \   000036   A2E0         MOV     C,0xE0 /* A   */.0
   \   000038   E4           CLR     A
   \   000039   92E0         MOV     0xE0 /* A   */.0,C
   \   00003B   2406         ADD     A,#0x6
   \   00003D   02....       LJMP    ??UART_SETUP_8 & 0xFFFF
   \                     ??UART_SETUP_7:
   \   000040   74C0         MOV     A,#-0x40
   \   000042   6A           XRL     A,R2
   \   000043   7003         JNZ     ??UART_SETUP_9
   \   000045   7412         MOV     A,#0x12
   \   000047   6B           XRL     A,R3
   \                     ??UART_SETUP_9:
   \   000048   700C         JNZ     ??UART_SETUP_10
   \   00004A   E5C6         MOV     A,0xc6
   \   00004C   A2E0         MOV     C,0xE0 /* A   */.0
   \   00004E   E4           CLR     A
   \   00004F   92E0         MOV     0xE0 /* A   */.0,C
   \   000051   2407         ADD     A,#0x7
   \   000053   02....       LJMP    ??UART_SETUP_11 & 0xFFFF
   \                     ??UART_SETUP_10:
   \   000056   7480         MOV     A,#-0x80
   \   000058   6A           XRL     A,R2
   \   000059   7003         JNZ     ??UART_SETUP_12
   \   00005B   7425         MOV     A,#0x25
   \   00005D   6B           XRL     A,R3
   \                     ??UART_SETUP_12:
   \   00005E   700C         JNZ     ??UART_SETUP_13
   \   000060   E5C6         MOV     A,0xc6
   \   000062   A2E0         MOV     C,0xE0 /* A   */.0
   \   000064   E4           CLR     A
   \   000065   92E0         MOV     0xE0 /* A   */.0,C
   \   000067   2408         ADD     A,#0x8
   \   000069   02....       LJMP    ??UART_SETUP_14 & 0xFFFF
   \                     ??UART_SETUP_13:
   \   00006C   7440         MOV     A,#0x40
   \   00006E   6A           XRL     A,R2
   \   00006F   7003         JNZ     ??UART_SETUP_15
   \   000071   7438         MOV     A,#0x38
   \   000073   6B           XRL     A,R3
   \                     ??UART_SETUP_15:
   \   000074   700C         JNZ     ??UART_SETUP_16
   \   000076   E5C6         MOV     A,0xc6
   \   000078   A2E0         MOV     C,0xE0 /* A   */.0
   \   00007A   E4           CLR     A
   \   00007B   92E0         MOV     0xE0 /* A   */.0,C
   \   00007D   2408         ADD     A,#0x8
   \   00007F   02....       LJMP    ??UART_SETUP_17 & 0xFFFF
   \                     ??UART_SETUP_16:
   \   000082   EA           MOV     A,R2
   \   000083   7003         JNZ     ??UART_SETUP_18
   \   000085   744B         MOV     A,#0x4b
   \   000087   6B           XRL     A,R3
   \                     ??UART_SETUP_18:
   \   000088   700C         JNZ     ??UART_SETUP_19
   \   00008A   E5C6         MOV     A,0xc6
   \   00008C   A2E0         MOV     C,0xE0 /* A   */.0
   \   00008E   E4           CLR     A
   \   00008F   92E0         MOV     0xE0 /* A   */.0,C
   \   000091   2409         ADD     A,#0x9
   \   000093   02....       LJMP    ??UART_SETUP_20 & 0xFFFF
   \                     ??UART_SETUP_19:
   \   000096   7480         MOV     A,#-0x80
   \   000098   6A           XRL     A,R2
   \   000099   7003         JNZ     ??UART_SETUP_21
   \   00009B   7470         MOV     A,#0x70
   \   00009D   6B           XRL     A,R3
   \                     ??UART_SETUP_21:
   \   00009E   700C         JNZ     ??UART_SETUP_22
   \   0000A0   E5C6         MOV     A,0xc6
   \   0000A2   A2E0         MOV     C,0xE0 /* A   */.0
   \   0000A4   E4           CLR     A
   \   0000A5   92E0         MOV     0xE0 /* A   */.0,C
   \   0000A7   2409         ADD     A,#0x9
   \   0000A9   02....       LJMP    ??UART_SETUP_23 & 0xFFFF
   \                     ??UART_SETUP_22:
   \   0000AC   12....       LCALL   ?Subroutine19 & 0xFFFF
   \                     ??CrossCallReturnLabel_66:
   \   0000AF   12....       LCALL   ?L_EQ_X
   \   0000B2   700C         JNZ     ??UART_SETUP_24
   \   0000B4   E5C6         MOV     A,0xc6
   \   0000B6   A2E0         MOV     C,0xE0 /* A   */.0
   \   0000B8   E4           CLR     A
   \   0000B9   92E0         MOV     0xE0 /* A   */.0,C
   \   0000BB   240A         ADD     A,#0xa
   \   0000BD   02....       LJMP    ??UART_SETUP_25 & 0xFFFF
   \                     ??UART_SETUP_24:
   \   0000C0   EB           MOV     A,R3
   \   0000C1   33           RLC     A
   \   0000C2   95E0         SUBB    A,0xE0 /* A   */
   \   0000C4   90....       MOV     DPTR,#__Constant_e100
   \   0000C7   78..         MOV     R0,#?V0 + 0
   \   0000C9   12....       LCALL   ?L_EQ_X
   \   0000CC   700C         JNZ     ??UART_SETUP_26
   \   0000CE   E5C6         MOV     A,0xc6
   \   0000D0   A2E0         MOV     C,0xE0 /* A   */.0
   \   0000D2   E4           CLR     A
   \   0000D3   92E0         MOV     0xE0 /* A   */.0,C
   \   0000D5   240A         ADD     A,#0xa
   \   0000D7   02....       LJMP    ??UART_SETUP_27 & 0xFFFF
   \                     ??UART_SETUP_26:
   \   0000DA   EB           MOV     A,R3
   \   0000DB   33           RLC     A
   \   0000DC   95E0         SUBB    A,0xE0 /* A   */
   \   0000DE   90....       MOV     DPTR,#__Constant_12c00
   \   0000E1   78..         MOV     R0,#?V0 + 0
   \   0000E3   12....       LCALL   ?L_EQ_X
   \   0000E6   700B         JNZ     ??UART_SETUP_28
   \   0000E8   E5C6         MOV     A,0xc6
   \   0000EA   A2E0         MOV     C,0xE0 /* A   */.0
   \   0000EC   E4           CLR     A
   \   0000ED   92E0         MOV     0xE0 /* A   */.0,C
   \   0000EF   240B         ADD     A,#0xb
   \   0000F1   806E         SJMP    ??UART_SETUP_29
   \                     ??UART_SETUP_28:
   \   0000F3   EB           MOV     A,R3
   \   0000F4   33           RLC     A
   \   0000F5   95E0         SUBB    A,0xE0 /* A   */
   \   0000F7   90....       MOV     DPTR,#__Constant_1c200
   \   0000FA   78..         MOV     R0,#?V0 + 0
   \   0000FC   12....       LCALL   ?L_EQ_X
   \   0000FF   700B         JNZ     ??UART_SETUP_30
   \   000101   E5C6         MOV     A,0xc6
   \   000103   A2E0         MOV     C,0xE0 /* A   */.0
   \   000105   E4           CLR     A
   \   000106   92E0         MOV     0xE0 /* A   */.0,C
   \   000108   240B         ADD     A,#0xb
   \   00010A   8053         SJMP    ??UART_SETUP_31
   \                     ??UART_SETUP_30:
   \   00010C   EB           MOV     A,R3
   \   00010D   33           RLC     A
   \   00010E   95E0         SUBB    A,0xE0 /* A   */
   \   000110   90....       MOV     DPTR,#__Constant_25800
   \   000113   78..         MOV     R0,#?V0 + 0
   \   000115   12....       LCALL   ?L_EQ_X
   \   000118   700B         JNZ     ??UART_SETUP_32
   \   00011A   E5C6         MOV     A,0xc6
   \   00011C   A2E0         MOV     C,0xE0 /* A   */.0
   \   00011E   E4           CLR     A
   \   00011F   92E0         MOV     0xE0 /* A   */.0,C
   \   000121   240C         ADD     A,#0xc
   \   000123   8038         SJMP    ??UART_SETUP_33
   \                     ??UART_SETUP_32:
   \   000125   EB           MOV     A,R3
   \   000126   33           RLC     A
   \   000127   95E0         SUBB    A,0xE0 /* A   */
   \   000129   90....       MOV     DPTR,#__Constant_38400
   \   00012C   78..         MOV     R0,#?V0 + 0
   \   00012E   12....       LCALL   ?L_EQ_X
   \   000131   700B         JNZ     ??UART_SETUP_34
   \   000133   E5C6         MOV     A,0xc6
   \   000135   A2E0         MOV     C,0xE0 /* A   */.0
   \   000137   E4           CLR     A
   \   000138   92E0         MOV     0xE0 /* A   */.0,C
   \   00013A   240C         ADD     A,#0xc
   \   00013C   801D         SJMP    ??UART_SETUP_35
   \                     ??UART_SETUP_34:
   \   00013E   EB           MOV     A,R3
   \   00013F   33           RLC     A
   \   000140   95E0         SUBB    A,0xE0 /* A   */
   \   000142   90....       MOV     DPTR,#__Constant_4b000
   \   000145   78..         MOV     R0,#?V0 + 0
   \   000147   12....       LCALL   ?L_EQ_X
   \   00014A   700C         JNZ     ??UART_SETUP_36
   \   00014C   E5C6         MOV     A,0xc6
   \   00014E   A2E0         MOV     C,0xE0 /* A   */.0
   \   000150   E4           CLR     A
   \   000151   92E0         MOV     0xE0 /* A   */.0,C
   \   000153   240D         ADD     A,#0xd
   \   000155   FD           MOV     R5,A
   \   000156   8002         SJMP    ??UART_SETUP_37
   \                     ??UART_SETUP_36:
   \   000158   7D00         MOV     R5,#0x0
   \                     ??UART_SETUP_37:
   \   00015A   ED           MOV     A,R5
   \                     ??UART_SETUP_35:
   \   00015B   FE           MOV     R6,A
   \   00015C   EE           MOV     A,R6
   \                     ??UART_SETUP_33:
   \   00015D   FD           MOV     R5,A
   \   00015E   ED           MOV     A,R5
   \                     ??UART_SETUP_31:
   \   00015F   FE           MOV     R6,A
   \   000160   EE           MOV     A,R6
   \                     ??UART_SETUP_29:
   \   000161   FD           MOV     R5,A
   \   000162   ED           MOV     A,R5
   \                     ??UART_SETUP_27:
   \   000163   FE           MOV     R6,A
   \   000164   EE           MOV     A,R6
   \                     ??UART_SETUP_25:
   \   000165   FD           MOV     R5,A
   \   000166   ED           MOV     A,R5
   \                     ??UART_SETUP_23:
   \   000167   FE           MOV     R6,A
   \   000168   EE           MOV     A,R6
   \                     ??UART_SETUP_20:
   \   000169   FD           MOV     R5,A
   \   00016A   ED           MOV     A,R5
   \                     ??UART_SETUP_17:
   \   00016B   FE           MOV     R6,A
   \   00016C   EE           MOV     A,R6
   \                     ??UART_SETUP_14:
   \   00016D   FD           MOV     R5,A
   \   00016E   ED           MOV     A,R5
   \                     ??UART_SETUP_11:
   \   00016F   FE           MOV     R6,A
   \   000170   EE           MOV     A,R6
   \                     ??UART_SETUP_8:
   \   000171   FD           MOV     R5,A
   \   000172   8DC5         MOV     0xc5,R5
    967              U0BAUD = BAUD_M(baudRate);
                              ^
Warning[Pa084]: pointless integer comparison with an out of range value

      U0BAUD = BAUD_M(baudRate);
               ^
"E:\嵌入式开发\hit-wsn\src\hit_wsn_2.1\hit_wsn_2.1\CC2430\Projects\zstack\Samples\Coordinator\Source\GenericApp.c",967  Warning[Pa084]: 
          pointless integer comparison with an out of range value

      U0BAUD = BAUD_M(baudRate);
               ^
"E:\嵌入式开发\hit-wsn\src\hit_wsn_2.1\hit_wsn_2.1\CC2430\Projects\zstack\Samples\Coordinator\Source\GenericApp.c",967  Warning[Pa084]: 
          pointless integer comparison with an out of range value

      U0BAUD = BAUD_M(baudRate);
               ^
"E:\嵌入式开发\hit-wsn\src\hit_wsn_2.1\hit_wsn_2.1\CC2430\Projects\zstack\Samples\Coordinator\Source\GenericApp.c",967  Warning[Pa084]: 
          pointless integer comparison with an out of range value

      U0BAUD = BAUD_M(baudRate);
               ^
"E:\嵌入式开发\hit-wsn\src\hit_wsn_2.1\hit_wsn_2.1\CC2430\Projects\zstack\Samples\Coordinator\Source\GenericApp.c",967  Warning[Pa084]: 
          pointless integer comparison with an out of range value

      U0BAUD = BAUD_M(baudRate);
               ^
"E:\嵌入式开发\hit-wsn\src\hit_wsn_2.1\hit_wsn_2.1\CC2430\Projects\zstack\Samples\Coordinator\Source\GenericApp.c",967  Warning[Pa084]: 
          pointless integer comparison with an out of range value

      U0BAUD = BAUD_M(baudRate);
               ^
"E:\嵌入式开发\hit-wsn\src\hit_wsn_2.1\hit_wsn_2.1\CC2430\Projects\zstack\Samples\Coordinator\Source\GenericApp.c",967  Warning[Pa084]: 
          pointless integer comparison with an out of range value
   \   000174   7460         MOV     A,#0x60
   \   000176   6A           XRL     A,R2
   \   000177   7003         JNZ     ??UART_SETUP_38
   \   000179   7409         MOV     A,#0x9
   \   00017B   6B           XRL     A,R3
   \                     ??UART_SETUP_38:
   \   00017C   7005         JNZ     ??UART_SETUP_39
   \   00017E   7A3B         MOV     R2,#0x3b
   \   000180   02....       LJMP    ??UART_SETUP_40 & 0xFFFF
   \                     ??UART_SETUP_39:
   \   000183   74C0         MOV     A,#-0x40
   \   000185   6A           XRL     A,R2
   \   000186   7003         JNZ     ??UART_SETUP_41
   \   000188   7412         MOV     A,#0x12
   \   00018A   6B           XRL     A,R3
   \                     ??UART_SETUP_41:
   \   00018B   7005         JNZ     ??UART_SETUP_42
   \   00018D   7B3B         MOV     R3,#0x3b
   \   00018F   02....       LJMP    ??UART_SETUP_43 & 0xFFFF
   \                     ??UART_SETUP_42:
   \   000192   7480         MOV     A,#-0x80
   \   000194   6A           XRL     A,R2
   \   000195   7003         JNZ     ??UART_SETUP_44
   \   000197   7425         MOV     A,#0x25
   \   000199   6B           XRL     A,R3
   \                     ??UART_SETUP_44:
   \   00019A   7005         JNZ     ??UART_SETUP_45
   \   00019C   7A3B         MOV     R2,#0x3b
   \   00019E   02....       LJMP    ??UART_SETUP_46 & 0xFFFF
   \                     ??UART_SETUP_45:
   \   0001A1   7440         MOV     A,#0x40
   \   0001A3   6A           XRL     A,R2
   \   0001A4   7003         JNZ     ??UART_SETUP_47
   \   0001A6   7438         MOV     A,#0x38
   \   0001A8   6B           XRL     A,R3
   \                     ??UART_SETUP_47:
   \   0001A9   7005         JNZ     ??UART_SETUP_48
   \   0001AB   7BD8         MOV     R3,#-0x28
   \   0001AD   02....       LJMP    ??UART_SETUP_49 & 0xFFFF
   \                     ??UART_SETUP_48:
   \   0001B0   EA           MOV     A,R2
   \   0001B1   7003         JNZ     ??UART_SETUP_50
   \   0001B3   744B         MOV     A,#0x4b
   \   0001B5   6B           XRL     A,R3
   \                     ??UART_SETUP_50:
   \   0001B6   7005         JNZ     ??UART_SETUP_51
   \   0001B8   7A3B         MOV     R2,#0x3b
   \   0001BA   02....       LJMP    ??UART_SETUP_52 & 0xFFFF
   \                     ??UART_SETUP_51:
   \   0001BD   7480         MOV     A,#-0x80
   \   0001BF   6A           XRL     A,R2
   \   0001C0   7003         JNZ     ??UART_SETUP_53
   \   0001C2   7470         MOV     A,#0x70
   \   0001C4   6B           XRL     A,R3
   \                     ??UART_SETUP_53:
   \   0001C5   7004         JNZ     ??UART_SETUP_54
   \   0001C7   7BD8         MOV     R3,#-0x28
   \   0001C9   8070         SJMP    ??UART_SETUP_55
   \                     ??UART_SETUP_54:
   \   0001CB   12....       LCALL   ?Subroutine19 & 0xFFFF
   \                     ??CrossCallReturnLabel_67:
   \   0001CE   12....       LCALL   ?L_EQ_X
   \   0001D1   7004         JNZ     ??UART_SETUP_56
   \   0001D3   7A3B         MOV     R2,#0x3b
   \   0001D5   8062         SJMP    ??UART_SETUP_57
   \                     ??UART_SETUP_56:
   \   0001D7   90....       MOV     DPTR,#__Constant_e100
   \   0001DA   78..         MOV     R0,#?V0 + 0
   \   0001DC   12....       LCALL   ?L_EQ_X
   \   0001DF   7004         JNZ     ??UART_SETUP_58
   \   0001E1   7BD8         MOV     R3,#-0x28
   \   0001E3   8052         SJMP    ??UART_SETUP_59
   \                     ??UART_SETUP_58:
   \   0001E5   90....       MOV     DPTR,#__Constant_12c00
   \   0001E8   78..         MOV     R0,#?V0 + 0
   \   0001EA   12....       LCALL   ?L_EQ_X
   \   0001ED   7004         JNZ     ??UART_SETUP_60
   \   0001EF   7A3B         MOV     R2,#0x3b
   \   0001F1   8042         SJMP    ??UART_SETUP_61
   \                     ??UART_SETUP_60:
   \   0001F3   90....       MOV     DPTR,#__Constant_1c200
   \   0001F6   78..         MOV     R0,#?V0 + 0
   \   0001F8   12....       LCALL   ?L_EQ_X
   \   0001FB   7004         JNZ     ??UART_SETUP_62
   \   0001FD   7BD8         MOV     R3,#-0x28
   \   0001FF   8032         SJMP    ??UART_SETUP_63
   \                     ??UART_SETUP_62:
   \   000201   90....       MOV     DPTR,#__Constant_25800
   \   000204   78..         MOV     R0,#?V0 + 0
   \   000206   12....       LCALL   ?L_EQ_X
   \   000209   7004         JNZ     ??UART_SETUP_64
   \   00020B   7A3B         MOV     R2,#0x3b
   \   00020D   8022         SJMP    ??UART_SETUP_65
   \                     ??UART_SETUP_64:
   \   00020F   90....       MOV     DPTR,#__Constant_38400
   \   000212   78..         MOV     R0,#?V0 + 0
   \   000214   12....       LCALL   ?L_EQ_X
   \   000217   7004         JNZ     ??UART_SETUP_66
   \   000219   7BD8         MOV     R3,#-0x28
   \   00021B   8012         SJMP    ??UART_SETUP_67
   \                     ??UART_SETUP_66:
   \   00021D   90....       MOV     DPTR,#__Constant_4b000
   \   000220   78..         MOV     R0,#?V0 + 0
   \   000222   12....       LCALL   ?L_EQ_X
   \   000225   7004         JNZ     ??UART_SETUP_68
   \   000227   7A3B         MOV     R2,#0x3b
   \   000229   8002         SJMP    ??UART_SETUP_69
   \                     ??UART_SETUP_68:
   \   00022B   7A00         MOV     R2,#0x0
   \                     ??UART_SETUP_69:
   \   00022D   EA           MOV     A,R2
   \   00022E   FB           MOV     R3,A
   \                     ??UART_SETUP_67:
   \   00022F   EB           MOV     A,R3
   \   000230   FA           MOV     R2,A
   \                     ??UART_SETUP_65:
   \   000231   EA           MOV     A,R2
   \   000232   FB           MOV     R3,A
   \                     ??UART_SETUP_63:
   \   000233   EB           MOV     A,R3
   \   000234   FA           MOV     R2,A
   \                     ??UART_SETUP_61:
   \   000235   EA           MOV     A,R2
   \   000236   FB           MOV     R3,A
   \                     ??UART_SETUP_59:
   \   000237   EB           MOV     A,R3
   \   000238   FA           MOV     R2,A
   \                     ??UART_SETUP_57:
   \   000239   EA           MOV     A,R2
   \   00023A   FB           MOV     R3,A
   \                     ??UART_SETUP_55:
   \   00023B   EB           MOV     A,R3
   \   00023C   FA           MOV     R2,A
   \                     ??UART_SETUP_52:
   \   00023D   EA           MOV     A,R2
   \   00023E   FB           MOV     R3,A
   \                     ??UART_SETUP_49:
   \   00023F   EB           MOV     A,R3
   \   000240   FA           MOV     R2,A
   \                     ??UART_SETUP_46:
   \   000241   EA           MOV     A,R2
   \   000242   FB           MOV     R3,A
   \                     ??UART_SETUP_43:
   \   000243   EB           MOV     A,R3
   \   000244   FA           MOV     R2,A
   \                     ??UART_SETUP_40:
   \   000245   8AC2         MOV     0xc2,R2
    968              U0UCR = ((options) | 0x80);
   \   000247   7480         MOV     A,#-0x80
   \   000249   4C           ORL     A,R4
   \   00024A   F5C4         MOV     0xc4,A
    969              U0CSR = 0x80;
   \   00024C   758680       MOV     0x86,#-0x80
    970                                       
    971              if((options) & TRANSFER_MSB_FIRST){        
   \   00024F   EC           MOV     A,R4
   \   000250   A2E7         MOV     C,0xE0 /* A   */.7
   \   000252   5003         JNC     ??UART_SETUP_70
    972                 U0GCR |= 0x20;                   
   \   000254   43C520       ORL     0xc5,#0x20
    973              }
    974          }
   \                     ??UART_SETUP_70:
   \   000257   02....       LJMP    ?Subroutine34 & 0xFFFF
   \   00025A                REQUIRE U0CSR
   \   00025A                REQUIRE U0BAUD
   \   00025A                REQUIRE U0UCR
   \   00025A                REQUIRE U0GCR
   \   00025A                REQUIRE CLKCON
   \   00025A                REQUIRE PERCFG
   \   00025A                REQUIRE P0SEL
   \   00025A                REQUIRE P1SEL

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine19:
   \   000000   8A..         MOV     ?V0 + 0,R2
   \   000002   EB           MOV     A,R3
   \   000003   F5..         MOV     ?V0 + 1,A
   \   000005   33           RLC     A
   \   000006   95E0         SUBB    A,0xE0 /* A   */
   \   000008   F5..         MOV     ?V0 + 2,A
   \   00000A   F5..         MOV     ?V0 + 3,A
   \   00000C   90....       MOV     DPTR,#__Constant_9600
   \   00000F   78..         MOV     R0,#?V0 + 0
   \   000011   22           RET
    975          /*
    976          void initUART(void)
    977          {
    978             // Setup for UART0
    979             IO_PER_LOC_USART0_AT_PORT0_PIN2345();
    980          
    981             //设置波特率和传输模式
    982             UART_SETUP(0, 9600, HIGH_STOP);
    983             
    984             UTX0IF = 1;
    985          }
    986          */
    987          // Global interrupt enables
    988          #define INT_GLOBAL_ENABLE(on) EA=(!!on)
    989          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    990          void UART0ISRopen(void)
   \                     UART0ISRopen:
    991          {
   \   000000                ; Saved register size: 0
   \   000000                ; Auto size: 0
    992            U0UCR|=0x80;
   \   000000   43C480       ORL     0xc4,#0x80
    993            IEN0 |= 0x04;//开串口接收中断 'URX0IE = 1',
   \   000003   D2AA         SETB    0xa8.2
    994            INT_GLOBAL_ENABLE(TRUE);
   \   000005   D2AF         SETB    0xa8.7
    995          }
   \   000007   02....       LJMP    ?BRET
   \   00000A                REQUIRE _A_IEN0
   \   00000A                REQUIRE U0UCR
    996          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    997          void initUART(void)
   \                     initUART:
    998          {
   \   000000   C082         PUSH    DPL
   \   000002   C083         PUSH    DPH
   \   000004                ; Saved register size: 2
   \   000004                ; Auto size: 0
    999             // Setup for UART0
   1000            // IO_PER_LOC_UART0_AT_PORT0_PIN2345();
   1001             IO_PER_LOC_USART0_AT_PORT0_PIN2345();
   \   000004   53F1FE       ANL     0xf1,#0xfe
   1002             //SET_MAIN_CLOCK_SOURCE(CRYSTAL);
   1003             UART_SETUP(0, 9600, HIGH_STOP);
   \   000007                ; Setup parameters for call to function UART_SETUP
   \   000007   7C02         MOV     R4,#0x2
   \   000009   7A80         MOV     R2,#-0x80
   \   00000B   7B25         MOV     R3,#0x25
   \   00000D   7900         MOV     R1,#0x0
   \   00000F   12....       LCALL   ??UART_SETUP?relay
   1004             U0CSR = 0xC5;//允许接收
   \   000012   7586C5       MOV     0x86,#-0x3b
   1005             UTX0IF=1;
   \   000015   D2E9         SETB    0xe8.1
   1006             URX0IF=1;
   \   000017   D28B         SETB    0x88.3
   1007             
   1008             UART0ISRopen();
   \   000019                ; Setup parameters for call to function UART0ISRopen
   \   000019   12....       LCALL   ??UART0ISRopen?relay
   1009          }
   \   00001C   02....       LJMP    ?Subroutine33 & 0xFFFF
   \   00001F                REQUIRE U0CSR
   \   00001F                REQUIRE _A_TCON
   \   00001F                REQUIRE _A_IRCON2
   \   00001F                REQUIRE PERCFG
   1010          
   1011          #pragma vector=URX0_VECTOR                //URX0_VECTOR

   \                                 In  segment NEAR_CODE, align 1, keep-with-next
   1012          __interrupt void URX0_IRQ(void)
                                               ^
Warning[Ta028]: Banked interrupt functions not allowed, __near_func is assumed
   \                     URX0_IRQ:
   1013          {
   \   000000                ; Saved register size: 1
   \   000000                ; Auto size: 0
   1014          }
   \   000000   32           RETI
   1015          
   1016          //-----------------------------------------------------------------------------
   1017          // sned str or char via uart0
   1018          //-----------------------------------------------------------------------------
   1019          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   1020          int uart0_putc(int c)
   \                     uart0_putc:
   1021          {
   \   000000                ; Saved register size: 1
   \   000000                ; Auto size: 0
   1022             if (c == '\n')  {
   \   000000   740A         MOV     A,#0xa
   \   000002   6A           XRL     A,R2
   \   000003   7001         JNZ     ??uart0_putc_0
   \   000005   EB           MOV     A,R3
   \                     ??uart0_putc_0:
   \   000006   7009         JNZ     ??uart0_putc_1
   1023                while (!UTX0IF);
   \                     ??uart0_putc_2:
   \   000008   A2E9         MOV     C,0xe8.1
   \   00000A   50FC         JNC     ??uart0_putc_2
   1024                UTX0IF = 0;
   \   00000C   C2E9         CLR     0xe8.1
   1025                U0DBUF = 0x0d;       //output CR 
   \   00000E   75C10D       MOV     0xc1,#0xd
   1026             }
   1027          
   1028             while (!UTX0IF);
   \                     ??uart0_putc_1:
   \   000011   A2E9         MOV     C,0xe8.1
   \   000013   50FC         JNC     ??uart0_putc_1
   1029             UTX0IF = 0;
   \   000015   C2E9         CLR     0xe8.1
   1030             return (U0DBUF = c);
   \   000017   8AC1         MOV     0xc1,R2
   \   000019   7B00         MOV     R3,#0x0
   \   00001B   02....       LJMP    ?BRET
   \   00001E                REQUIRE U0DBUF
   \   00001E                REQUIRE _A_IRCON2
   1031          }
   1032          
   1033          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   1034          void uart0_puts(char* str,int len)
   \                     uart0_puts:
   1035          {
   \   000000   74F3         MOV     A,#-0xd
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 13
   \   000005                ; Auto size: 0
   \   000005   8A..         MOV     ?V0 + 2,R2
   \   000007   8B..         MOV     ?V0 + 3,R3
   \   000009   8C..         MOV     ?V0 + 0,R4
   \   00000B   8D..         MOV     ?V0 + 1,R5
   1036              int i = 0;
   1037              if(str == NULL)
   \   00000D   EA           MOV     A,R2
   \   00000E   7001         JNZ     ??uart0_puts_0
   \   000010   EB           MOV     A,R3
   \                     ??uart0_puts_0:
   \   000011   602D         JZ      ??uart0_puts_1
   1038                  return ;
   1039              for(i = 0; i < len; i++)
   \   000013   7E00         MOV     R6,#0x0
   \   000015   7F00         MOV     R7,#0x0
   \   000017   8019         SJMP    ??uart0_puts_2
   1040              {
   1041                  uart0_putc(*(str+i));
   \                     ??uart0_puts_3:
   \   000019                ; Setup parameters for call to function uart0_putc
   \   000019   E5..         MOV     A,?V0 + 2
   \   00001B   2E           ADD     A,R6
   \   00001C   F582         MOV     DPL,A
   \   00001E   E5..         MOV     A,?V0 + 3
   \   000020   3F           ADDC    A,R7
   \   000021   F583         MOV     DPH,A
   \   000023   E0           MOVX    A,@DPTR
   \   000024   FA           MOV     R2,A
   \   000025   7B00         MOV     R3,#0x0
   \   000027   12....       LCALL   ??uart0_putc?relay
   1042              }
   \   00002A   EE           MOV     A,R6
   \   00002B   2401         ADD     A,#0x1
   \   00002D   0E           INC     R6
   \   00002E   EF           MOV     A,R7
   \   00002F   3400         ADDC    A,#0x0
   \   000031   FF           MOV     R7,A
   \                     ??uart0_puts_2:
   \   000032   C3           CLR     C
   \   000033   EE           MOV     A,R6
   \   000034   95..         SUBB    A,?V0 + 0
   \   000036   EF           MOV     A,R7
   \   000037   95..         SUBB    A,?V0 + 1
   \   000039   A2D2         MOV     C,0xD0 /* PSW */.2
   \   00003B   65D0         XRL     A,PSW
   \   00003D   33           RLC     A
   \   00003E   40D9         JC      ??uart0_puts_3
   \                     ??uart0_puts_1:
   \   000040   02....       LJMP    ?Subroutine37 & 0xFFFF
   1043          }

   \                                 In  segment INTVEC, offset 0x13, root
   \                     `??URX0_IRQ??INTVEC 19`:
   \   000013   02....       LJMP       (URX0_IRQ)

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for <Constant "GenericApp">>`:
   \   000000   47656E65     DB "GenericApp"
   \            72696341
   \            707000  

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for <Constant "hal sw1 pressed!\\`:
   \   000000   68616C20     DB "hal sw1 pressed!\015\012"
   \            73773120
   \            70726573
   \            73656421
   \            0D0A00  

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for <Constant "hal sw2 pressed!\\`:
   \   000000   68616C20     DB "hal sw2 pressed!\015\012"
   \            73773220
   \            70726573
   \            73656421
   \            0D0A00  

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for <Constant "hal sw3 pressed!\\`:
   \   000000   68616C20     DB "hal sw3 pressed!\015\012"
   \            73773320
   \            70726573
   \            73656421
   \            0D0A00  

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for <Constant "hal sw4 pressed!\\`:
   \   000000   68616C20     DB "hal sw4 pressed!\015\012"
   \            73773420
   \            70726573
   \            73656421
   \            0D0A00  

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for <Constant "Hello World">>`:
   \   000000   48656C6C     DB "Hello World"
   \            6F20576F
   \            726C6400

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for GenericApp_ClusterList>`:
   \   000000   0100         DW 1

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for GenericApp_SimpleDesc>`:
   \   000000   0A           DB 10
   \   000001   040F0100     DW 3844, 1
   \   000005   0001         DB 0, 1
   \   000007   ....         DW GenericApp_ClusterList
   \   000009   01           DB 1
   \   00000A   ....         DW GenericApp_ClusterList

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for __Constant_9600>`:
   \   000000   00960000     DD 38400

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for __Constant_e100>`:
   \   000000   00E10000     DD 57600

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for __Constant_12c00>`:
   \   000000   002C0100     DD 76800

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for __Constant_1c200>`:
   \   000000   00C20100     DD 115200

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for __Constant_25800>`:
   \   000000   00580200     DD 153600

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for __Constant_38400>`:
   \   000000   00840300     DD 230400

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for __Constant_4b000>`:
   \   000000   00B00400     DD 307200

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??GenericApp_Init?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    GenericApp_Init

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??GenericApp_ProcessEvent?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    GenericApp_ProcessEvent

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??GenericApp_ProcessZDOMsgs?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    GenericApp_ProcessZDOMsgs

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??GenericApp_HandleKeys?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    GenericApp_HandleKeys

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??GenericApp_MessageMSGCB?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    GenericApp_MessageMSGCB

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??GenericApp_SendTheMessage?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    GenericApp_SendTheMessage

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??uart0_getString?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    uart0_getString

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??data_trans_Init?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    data_trans_Init

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??data_trans_process?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    data_trans_process

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??UART_SETUP?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    UART_SETUP

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??UART0ISRopen?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    UART0ISRopen

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??initUART?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    initUART

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??uart0_putc?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    uart0_putc

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??uart0_puts?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    uart0_puts

   \                                 In  segment XDATA_Z, align 1, keep-with-next
   \                     `?<Constant "">`:
   \   000000                DS 33
   \   000021                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_I, align 1, keep-with-next
   \                     `?<Constant "GenericApp">`:
   \   000000                DS 11
   \   00000B                REQUIRE `?<Initializer for <Constant "GenericApp">>`
   \   00000B                REQUIRE __INIT_XDATA_I

   \                                 In  segment XDATA_I, align 1, keep-with-next
   \                     `?<Constant "hal sw1 pressed!\\r\\n">`:
   \   000000                DS 19
   \   000013                REQUIRE `?<Initializer for <Constant "hal sw1 pressed!\\`
   \   000013                REQUIRE __INIT_XDATA_I

   \                                 In  segment XDATA_I, align 1, keep-with-next
   \                     `?<Constant "hal sw2 pressed!\\r\\n">`:
   \   000000                DS 19
   \   000013                REQUIRE `?<Initializer for <Constant "hal sw2 pressed!\\`
   \   000013                REQUIRE __INIT_XDATA_I

   \                                 In  segment XDATA_I, align 1, keep-with-next
   \                     `?<Constant "hal sw3 pressed!\\r\\n">`:
   \   000000                DS 19
   \   000013                REQUIRE `?<Initializer for <Constant "hal sw3 pressed!\\`
   \   000013                REQUIRE __INIT_XDATA_I

   \                                 In  segment XDATA_I, align 1, keep-with-next
   \                     `?<Constant "hal sw4 pressed!\\r\\n">`:
   \   000000                DS 19
   \   000013                REQUIRE `?<Initializer for <Constant "hal sw4 pressed!\\`
   \   000013                REQUIRE __INIT_XDATA_I

   \                                 In  segment XDATA_I, align 1, keep-with-next
   \                     `?<Constant "Hello World">`:
   \   000000                DS 12
   \   00000C                REQUIRE `?<Initializer for <Constant "Hello World">>`
   \   00000C                REQUIRE __INIT_XDATA_I

   \                                 In  segment XDATA_I, align 1, keep-with-next
   \                     __Constant_9600:
   \   000000                DS 4
   \   000004                REQUIRE `?<Initializer for __Constant_9600>`
   \   000004                REQUIRE __INIT_XDATA_I

   \                                 In  segment XDATA_I, align 1, keep-with-next
   \                     __Constant_e100:
   \   000000                DS 4
   \   000004                REQUIRE `?<Initializer for __Constant_e100>`
   \   000004                REQUIRE __INIT_XDATA_I

   \                                 In  segment XDATA_I, align 1, keep-with-next
   \                     __Constant_12c00:
   \   000000                DS 4
   \   000004                REQUIRE `?<Initializer for __Constant_12c00>`
   \   000004                REQUIRE __INIT_XDATA_I

   \                                 In  segment XDATA_I, align 1, keep-with-next
   \                     __Constant_1c200:
   \   000000                DS 4
   \   000004                REQUIRE `?<Initializer for __Constant_1c200>`
   \   000004                REQUIRE __INIT_XDATA_I

   \                                 In  segment XDATA_I, align 1, keep-with-next
   \                     __Constant_25800:
   \   000000                DS 4
   \   000004                REQUIRE `?<Initializer for __Constant_25800>`
   \   000004                REQUIRE __INIT_XDATA_I

   \                                 In  segment XDATA_I, align 1, keep-with-next
   \                     __Constant_38400:
   \   000000                DS 4
   \   000004                REQUIRE `?<Initializer for __Constant_38400>`
   \   000004                REQUIRE __INIT_XDATA_I

   \                                 In  segment XDATA_I, align 1, keep-with-next
   \                     __Constant_4b000:
   \   000000                DS 4
   \   000004                REQUIRE `?<Initializer for __Constant_4b000>`
   \   000004                REQUIRE __INIT_XDATA_I

   Maximum stack usage in bytes:

     Function                       ISTACK PSTACK XSTACK
     --------                       ------ ------ ------
     GenericApp_HandleKeys              1      0     40
       -> HalUARTWrite                  0      0     38
       -> HalUARTWrite                  0      0     38
       -> HalLedSet                     0      0     38
       -> NLME_GetShortAddr             0      0     38
       -> ZDP_EndDeviceBindReq          0      0     56
       -> HalUARTWrite                  0      0     38
       -> HalUARTWrite                  0      0     38
       -> HalLedSet                     0      0     38
       -> ZDP_MatchDescReq              0      0     54
     GenericApp_Init                    2      0      0
       -> afRegister                    4      0      0
       -> RegisterForKeys               4      0      0
       -> HalLcdWriteString             4      0      0
       -> ZDO_RegisterForZDOMsg         4      0      0
       -> ZDO_RegisterForZDOMsg         4      0      0
       -> initUART                      4      0      0
     GenericApp_MessageMSGCB            1      0     28
       -> strcmp                        0      0     32
     GenericApp_ProcessEvent            0      0     12
       -> osal_msg_receive              0      0     24
       -> osal_msg_deallocate           0      0     24
       -> osal_msg_receive              0      0     24
       -> GenericApp_ProcessZDOMsgs     0      0     24
       -> GenericApp_HandleKeys         0      0     24
       -> GenericApp_MessageMSGCB       0      0     24
     GenericApp_ProcessZDOMsgs          0      0     22
       -> HalLedSet                     0      0     20
       -> HalLedSet                     0      0     20
       -> ZDO_ParseEPListRsp            0      0     20
       -> HalLedSet                     0      0     20
       -> osal_mem_free                 0      0     20
     GenericApp_SendTheMessage          2      0     31
       -> osal_strlen                   0      0     54
       -> AF_DataRequest                0      0     62
     UART0ISRopen                       0      0      0
     UART_SETUP                         0      0     12
     URX0_IRQ                           1      0      0
     data_trans_Init                    2      0      0
       -> SPIMgr_RegisterTaskID         4      0      0
     data_trans_process                 4      0     33
       -> HalUARTRead                   4      0     66
       -> strlen                        4      0     66
       -> strlen                        4      0     66
       -> HalUARTWrite                  4      0     66
     initUART                           2      0      0
       -> UART_SETUP                    4      0      0
       -> UART0ISRopen                  4      0      0
     uart0_getString                    1      0     13
     uart0_putc                         1      0     13
     uart0_puts                         0      0     13
       -> uart0_putc                    0      0     26


   Segment part sizes:

     Function/Label                 Bytes
     --------------                 -----
     U0CSR                             1
     _A_TCON                           1
     _A_IEN0                           1
     U0DBUF                            1
     U0BAUD                            1
     U0UCR                             1
     U0GCR                             1
     CLKCON                            1
     _A_IRCON2                         1
     PERCFG                            1
     P0SEL                             1
     P1SEL                             1
     GenericApp_ClusterList            2
     GenericApp_SimpleDesc            12
     GenericApp_epDesc                 6
     GenericApp_TaskID                 1
     GenericApp_NwkState               1
     GenericApp_TransID                1
     GenericApp_DstAddr                4
     data_trans_TaskID                 1
     GenericApp_Init                 119
     ?Subroutine33                     7
     GenericApp_ProcessEvent         153
     ?Subroutine34                     5
     GenericApp_ProcessZDOMsgs       145
     ?Subroutine35                     8
     ?Subroutine14                    17
     ?Subroutine16                    11
     GenericApp_HandleKeys           277
     ?Subroutine18                    15
     point_info                      300
     point_num                         2
     GenericApp_MessageMSGCB         672
     ?Subroutine17                    29
     ?Subroutine15                     6
     ?Subroutine12                     4
     ?Subroutine11                     4
     ?Subroutine21                     4
     ?Subroutine29                     7
     ?Subroutine10                     9
     ?Subroutine27                     9
     ?Subroutine9                      9
     ?Subroutine8                      9
     ?Subroutine7                      9
     ?Subroutine6                      9
     ?Subroutine5                      9
     ?Subroutine25                     4
     ?Subroutine32                    12
     ?Subroutine22                    16
     ?Subroutine4                      9
     ?Subroutine3                      9
     ?Subroutine2                     21
     ?Subroutine1                     21
     ?Subroutine0                     97
     ?Subroutine28                     5
     ?Subroutine36                     5
     ?Subroutine26                     4
     ?Subroutine31                    14
     ?Subroutine24                     4
     ?Subroutine30                     5
     ?Subroutine23                     5
     ?Subroutine20                    10
     GenericApp_SendTheMessage       129
     uart0_getString                 168
     ?Subroutine37                     5
     ?Subroutine13                    10
     data_trans_Init                  14
     data_trans_process              101
     UART_SETUP                      602
     ?Subroutine19                    18
     UART0ISRopen                     10
     initUART                         31
     URX0_IRQ                          1
     uart0_putc                       30
     uart0_puts                       67
     ??URX0_IRQ??INTVEC 19             3
     ?<Initializer for <Constant "GenericApp">>
                                      11
     ?<Initializer for <Constant "hal sw1 pressed!\
                                      19
     ?<Initializer for <Constant "hal sw2 pressed!\
                                      19
     ?<Initializer for <Constant "hal sw3 pressed!\
                                      19
     ?<Initializer for <Constant "hal sw4 pressed!\
                                      19
     ?<Initializer for <Constant "Hello World">>
                                      12
     ?<Initializer for GenericApp_ClusterList>
                                       2
     ?<Initializer for GenericApp_SimpleDesc>
                                      12
     ?<Initializer for __Constant_9600>
                                       4
     ?<Initializer for __Constant_e100>
                                       4
     ?<Initializer for __Constant_12c00>
                                       4
     ?<Initializer for __Constant_1c200>
                                       4
     ?<Initializer for __Constant_25800>
                                       4
     ?<Initializer for __Constant_38400>
                                       4
     ?<Initializer for __Constant_4b000>
                                       4
     ??GenericApp_Init?relay           6
     ??GenericApp_ProcessEvent?relay
                                       6
     ??GenericApp_ProcessZDOMsgs?relay
                                       6
     ??GenericApp_HandleKeys?relay     6
     ??GenericApp_MessageMSGCB?relay
                                       6
     ??GenericApp_SendTheMessage?relay
                                       6
     ??uart0_getString?relay           6
     ??data_trans_Init?relay           6
     ??data_trans_process?relay        6
     ??UART_SETUP?relay                6
     ??UART0ISRopen?relay              6
     ??initUART?relay                  6
     ??uart0_putc?relay                6
     ??uart0_puts?relay                6
     ?<Constant "">                   33
     ?<Constant "GenericApp">         11
     ?<Constant "hal sw1 pressed!\r\n">
                                      19
     ?<Constant "hal sw2 pressed!\r\n">
                                      19
     ?<Constant "hal sw3 pressed!\r\n">
                                      19
     ?<Constant "hal sw4 pressed!\r\n">
                                      19
     ?<Constant "Hello World">        12
     __Constant_9600                   4
     __Constant_e100                   4
     __Constant_12c00                  4
     __Constant_1c200                  4
     __Constant_25800                  4
     __Constant_38400                  4
     __Constant_4b000                  4

 
 2 972 bytes in segment BANKED_CODE
    84 bytes in segment BANK_RELAYS
     3 bytes in segment INTVEC
     1 byte  in segment NEAR_CODE
    12 bytes in segment SFR_AN
   141 bytes in segment XDATA_I
   141 bytes in segment XDATA_ID
   349 bytes in segment XDATA_Z
 
 3 170 bytes of CODE  memory (+ 31 bytes shared)
     0 bytes of DATA  memory (+ 12 bytes shared)
   462 bytes of XDATA memory (+ 28 bytes shared)

Errors: none
Warnings: 22
